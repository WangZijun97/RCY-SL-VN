{"version":3,"sources":["consts.js","NodeImg.jsx","arcs/ask.jsx","events.js","arcs/dev.jsx","stars.jsx","analysis.jsx","timeline.jsx","arcs/end.jsx","arcs/home.jsx","convo/Dialogue.jsx","convo/scrooge.jsx","convo/jonathan.js","convo/allam.js","convo/emily.js","convo/carmen.js","convo/GrpConvo.jsx","convo/ncoDebrief.js","arcs/learn.jsx","arcs/plan.jsx","convo/cadetDebrief.js","arcs/reflect.jsx","arcs/serve.jsx","data.js","Node.js","Sidebar.jsx","Game.js","music.js","Navbar.jsx","App.js","reportWebVitals.js","index.js"],"names":["consts","SESAME","SUNSHINE","ncogoals","NONE","NOT_SPECIFIC","NCO","LEARN_STORIES_BEF_RESEARCH","LEARN_STORIES_AFT_RESEARCH","SOLVE_PROBLEMS_BEF_RESEARCH","SOLVE_PROBLEMS_AFT_RESEARCH","EXCITING_ACTIVITIES","activities","AMONG_US","SOCCER","CHIT_CHAT","KITE","songs","K_POP","NDP","SCHOOL_SONG","RAP","OLD","books","SNOW_WHITE","GERONIMO","HARRY_POTTER","HARD_TRUTHS","rolesandgoals","SCOLD","YO_SCOLD","OIC","CHECK_ON_THEM","TRADITION","cadetgoal","CADET","BAD","GOOD","results","OK","EXCELLENT","sessions","ONE","TWO_TGT","TWO_SPREAD","FOUR","debrief","BOTH","events","MARGIN","REIMBURSEMENT","CHAPERONE","ICE_CREAM","allActivities","motivatedAskQns","NodeImg","props","alt","src","ext","process","width","height","askArcNodes","bgm","img","rowspan","text","flags","Fragment","className","activity","option","next","fx","map","decisionVisibility","Object","values","getRandomEvent","Math","floor","random","length","doP9Check","altOption","midEvent","doP15Check","doP5Check","objToKeyValArray","obj","keyPrefix","entries","k","v","devNodes","lastNode","flat","join","name","research","call","freeTime","recce","brochure","email","allVals","includes","indexOf","ncogoal","result","Stars","label","rating","filledProps","color","opacity","unfilledProps","Array","_","i","icon","faStar","getLocationChoiceText","homeName","icons","getResearchTitleAndEntry","researchState","MEDIOCRE","getNcoGoalTitleAndEntry","ncoGoalState","getNcoRnGTitleAndEntry","ncoRnGState","CHECK_ON_TIME","varpart","getCadetGoalTitleAndEntry","cadetGoalState","getChitChatTitleAndEntry","chitChatAfter","debriefPerhapsClause","getDebriefTitleAndEntry","debriefState","faGrinStars","faSmile","faMeh","faFrown","SimpleEntry","children","Entry","arc","title","keyword","type","React","useState","expanded","setExpanded","keywordClass","iconMeta","iconColor","size","onClick","faChevronUp","faChevronDown","Timeline","locationChoiceTitle","locationChoiceEntry","locationChoiceIcon","researchTitle","researchEntry","researchIcon","ncoGoalTitle","ncoGoalEntry","ncoGoalIcon","getActivityDescription","activityEntry","activityIcon","ncoRnGTitle","ncoRnGEntry","ncoRnGIcon","sessionsState","getSessionsTitleAndEntry","sessionsTitle","sessionsEntry","sessionsIcon","cadetGoalTitle","cadetGoalEntry","cadetGoalIcon","finalChitChat","chitChatTitle","chitChatEntry","chitChatIcon","debriefTitle","debriefEntry","debriefIcon","calculateLearningScore","score","VI","endNodes","noTimeToDebriefCadets","getEndingBgm","href","target","rel","assign","getInitialFlags","homeArcNodes","askedQnsReducer","state","action","Dialogue","numOfLines","startOfConvo","speakerClass","convos","availableQnGetter","askedQns","filter","maxQns","endOfConvo","useReducer","addQn","combinedSpeakerClass","clsx","availableQns","createButtonHandler","qnIndex","qnsLeft","q","a","ans","class","style","display","scroogeConvos","jonConvos","allamConvos","emilyConvos","carmenConvos","GroupConvo","cssClassMap","ConvoToJsx","convo","ncoChatClsMap","Michael","Ryan","Mary","Sarah","nodes","condition","spokeToScrooge","frameBorder","spokeToResidents","planArcNodes","soccer","allowFullScreen","cadetChatClsMap","Roy","Liz","Jack","reflectArcNodes","finalSpokeToResidents","finalSpokeToScrooge","POOR_RESULTS","calculateScore","serveArcNodes","isMuted","allow","frameborder","allowfullscreen","makeDescription","isSesame","str","didChitChat","nodeoof","index","learnArcNodes","getNode","node","undefined","Node","handleClick","bind","textgen","buttongen","doBgmChange","Function","this","onMusicChange","opt","trigger","dispatch","txt","prop","sidebarShown","imggen","data","Component","Sidebar","volume","onVolumeChange","onMuteToggle","faVolumeMute","faVolumeUp","min","max","value","onChange","event","initialFlags","JSON","stringify","parse","reducer","draftOfState","keySequence","endingPos","Game","setNode","flagDispatch","seqPos","setSeqPos","touchStart","setTouchStart","touchEnd","setTouchEnd","onMusicDisable","onSidebarChange","other","useEffect","keypressListener","e","code","document","addEventListener","removeEventListener","onTouchStart","targetTouches","clientX","onTouchMove","onTouchEnd","threshold","window","innerWidth","CROSSFADE_STEP_SIZE","createHTMLAudioElement","fileName","el","Audio","loop","musicStates","mutedStates","checkIsMuted","initialMusic","active","fadeOut","fadeProgress","actionTypes","musicStateReducer","amplitude","payload","forEach","audio","oldProgress","newProgress","Navbar","onSidebarToggle","faBars","App","audioState","audioDispatch","setVolume","setSidebarShown","interval","setInterval","createEvolveAction","sin","PI","cos","pause","play","FADE_DURATION_IN_MS","clearInterval","createChangeAction","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c25a3fe2.chunk.js","sourcesContent":["const consts = {\r\n    SESAME: \"Sesame Street Children's Home\",\r\n    SUNSHINE: \"Sunshine Children's Home\",\r\n    ncogoals: {\r\n        NONE: \"did not set\",\r\n        NOT_SPECIFIC: \"goal set is not specific\",\r\n        NCO: \"set by NCOs\",\r\n        LEARN_STORIES_BEF_RESEARCH: \"by OIC - learn stories - no research yet\",\r\n        LEARN_STORIES_AFT_RESEARCH: \"by OIC - learn stories - research already\",\r\n        SOLVE_PROBLEMS_BEF_RESEARCH: \"by OIC - solve problems - no research yet\",\r\n        SOLVE_PROBLEMS_AFT_RESEARCH: \"by OIC - solve problems - research already\",\r\n        EXCITING_ACTIVITIES: \"by OIC - exciting activities\",\r\n    },\r\n    activities: {\r\n        AMONG_US: \"play Among Us\",\r\n        SOCCER: \"play Soccer\",\r\n        CHIT_CHAT: \"just chit chat\",\r\n        KITE: \"play Kite Fighting\"\r\n    },\r\n    songs: {\r\n        K_POP: \"sing K-pop\",\r\n        NDP: \"sing National Day songs\",\r\n        SCHOOL_SONG: \"sing School Song and Red Cross Song\",\r\n        RAP: \"sing Rap\",\r\n        OLD: \"sing 80s songs\"\r\n    },\r\n    books: {\r\n        SNOW_WHITE: \"read Snow White + Three Little Pigs\",\r\n        GERONIMO: \"read Geronimo Stilton + Enid Blyton\",\r\n        HARRY_POTTER: \"read Harry Potter + Percy Jackson\",\r\n        HARD_TRUTHS: \"read Hard Truths to Keep Singapore Going\"\r\n    },\r\n    rolesandgoals: {\r\n        NONE: \"don't intervene\",\r\n        SCOLD: \"scold\",\r\n        YO_SCOLD: \"YO scold\",\r\n        OIC: \"OIC tank\",\r\n        CHECK_ON_THEM: \"check on them\",\r\n        TRADITION: \"tradition\"\r\n    },\r\n    cadetgoal: {\r\n        NONE: \"Did not set\",\r\n        NCO: \"Set by NCOs\",\r\n        CADET: \"Set by cadets\",\r\n        BAD: \"Set by cadets but bad\",\r\n        GOOD: \"Set by cadets well\"\r\n    },\r\n    results: {\r\n        OK: \"meh\",\r\n        GOOD: \"good\",\r\n        EXCELLENT: \"excellent\"\r\n    },\r\n    sessions: {\r\n        ONE: \"1 session\",\r\n        TWO_TGT: \"2 sessions in a month\",\r\n        TWO_SPREAD: \"2 sessions spread out\",\r\n        FOUR: \"4 sessions spread out\"\r\n    },\r\n    debrief: {\r\n        NCO: \"NCOs debriefed only\",\r\n        CADET: \"Cadets debriefed only\",\r\n        BOTH: \"Both were debriefed\"\r\n    },\r\n    events: {\r\n        MARGIN: \"margin width\",\r\n        REIMBURSEMENT: \"reimbursement\",\r\n        CHAPERONE: \"chaperone\",\r\n        ICE_CREAM: \"ice cream\",\r\n    }\r\n};\r\n\r\nexport const allActivities = {\r\n    ...consts.activities,\r\n    ...consts.songs,\r\n    ...consts.books\r\n}\r\n\r\nexport const motivatedAskQns = [\r\n    consts.ncogoals.LEARN_STORIES_BEF_RESEARCH,\r\n    consts.ncogoals.SOLVE_PROBLEMS_BEF_RESEARCH,\r\n]\r\n\r\nexport const motivatedTalkToResidents = [\r\n    consts.ncogoals.LEARN_STORIES_BEF_RESEARCH,\r\n    consts.ncogoals.LEARN_STORIES_AFT_RESEARCH\r\n]\r\n\r\nexport default consts;\r\n","import React from 'react';\r\n\r\nconst NodeImg = (props) => {\r\n    const alt = props.alt && \"\";\r\n    const src = ('ext' in props) ? props.ext : `${process.env.PUBLIC_URL}/img/${props.src}`\r\n\r\n    const { width, height } = props;\r\n\r\n    return <img src={src} alt={alt} width={width} height={height} />;\r\n}\r\n\r\nexport default NodeImg\r\n","import React from 'react';\r\nimport consts from '../consts';\r\nimport NodeImg from '../NodeImg';\r\n\r\nconst askArcNodes = {\r\n    \"A1\": {\r\n        bgm: 'chariots-of-fire.mp3',\r\n        img: () => (<table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Time</th>\r\n                    <th>Activity</th>\r\n                    <th>Location</th>\r\n                    <th>Briefing Pointers</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>1400 - 1430</td>\r\n                    <td>Reporting Parade</td>\r\n                    <td>Parade Square</td>\r\n                    <td rowspan=\"4\"><ul>\r\n                        <li>Home Location</li>\r\n                        <li>VIA Programme</li>\r\n                        <li>Safety Details</li>\r\n                    </ul></td>\r\n                </tr>\r\n                <tr>\r\n                    <td>1430 - 1515</td>\r\n                    <td>VIA Briefing</td>\r\n                    <td>Classroom</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>1515 - 1600</td>\r\n                    <td>Buffer</td>\r\n                    <td>Classroom</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>1600 - 1630</td>\r\n                    <td>Dismissal Parade</td>\r\n                    <td>Parade Square</td>\r\n                </tr>\r\n            </tbody>\r\n            </table>\r\n            ),\r\n        text: (flags) => (<React.Fragment>\r\n            <p>The home visit is soon approaching. You have requested your NCOs to prepare the unit for the VIA. This is their plan for the training right before the VIA. What feedback do you have for the training plan?</p>\r\n            <p className=\"informative\">[Reminder: your unit has chosen to {flags.activity}.]</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"It's very good, carry on.\",\r\n                next: \"A3\"\r\n            },\r\n            {\r\n                text: \"You should reduce the time for the parades and give them to the briefing\",\r\n                next: \"A3\"\r\n            },\r\n            {\r\n                text: \"You should reduce the buffer time for the briefing and end training early\",\r\n                next: \"A3\"\r\n            },\r\n            {\r\n                text: \"You should add something to the training\",\r\n                next: \"A2\"\r\n            }\r\n        ]\r\n    },\r\n    \r\n    \"A2\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>What would you like to include in the training?</p>\r\n            <p className=\"informative\">[Reminder: your unit has chosen to {flags.activity}.]</p>\r\n        </React.Fragment>\r\n            ),\r\n        option: [\r\n            {\r\n                text: \"The NCOs should tell the cadets what they should try and learn from the VIA\",\r\n                next: \"A3\",\r\n                fx: (flags) => flags.cadetgoal = consts.cadetgoal.NCO\r\n            },\r\n            {\r\n                text: \"A facilitation session for the cadets to set their individual goals for the VIA\",\r\n                next: \"A3\",\r\n                fx: (flags) => flags.cadetgoal = consts.cadetgoal.CADET\r\n            },\r\n            {\r\n                text: \"Conduct a dry run of the activities during the VIA\",\r\n                next: \"A3\"\r\n            },\r\n            {\r\n                text: \"Bring the whole unit to the Red Cross Room to help pack the logistics for the VIA\",\r\n                next: \"A3\"\r\n            },\r\n            {\r\n                text: \"Never mind, the training is okay as it is. (Back)\",\r\n                next: \"A1\"\r\n            }\r\n        ]\r\n    },\r\n    \r\n    \"A3\": {\r\n        img: (<NodeImg src=\"footdrill.png\" />),\r\n        text: \"It is the day of the training. During reporting parade, some of your batchmates observed that the cadets' foot drill standards are very bad and they want to spend the whole training revising foot drill. Should you intervene?\",\r\n        option: [\r\n            {\r\n                text: \"Let your committee go ahead with the foot drill lesson\",\r\n                next: \"A4\"\r\n            },\r\n            ...[\"Let them spend 15 minutes on foot drill before carrying on with the original plan\", \"Rush them through reporting parade\"].map((text) => ({\r\n                text,\r\n                next: \"A5\"\r\n                }\r\n            )),\r\n        ]\r\n    },\r\n    \r\n    \"A4\": {\r\n        img: (<NodeImg src=\"NotLikeDuck.png\" alt=\"notlikeduck\" />),\r\n        text: \"Your cadets don't know anything about the VIA and it fails spectacularly.\",\r\n        option: [{\r\n            text: \"Let's not do that... (Back)\",\r\n            next: \"A3\"\r\n        }]\r\n    },\r\n    \r\n    \"A5\": {\r\n        text: \"The parade is done and the committee are starting the briefing session.\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: (flags) => {\r\n                switch (flags.cadetgoal) {\r\n                    case consts.cadetgoal.CADET:\r\n                        return \"A6\"\r\n                    case consts.cadetgoal.NCO:\r\n                        return \"A8\"\r\n                    default:\r\n                        return \"A10\"\r\n                }\r\n            },\r\n            fx: (flags) => {\r\n                if (flags.cadetgoal !== consts.cadetgoal.CADET) {\r\n                    flags.decisionVisibility.cadetgoal = true;\r\n                }\r\n            }\r\n        }]\r\n    },\r\n    \r\n    \"A6\": {\r\n        bgm: 'kahoot.mp3',\r\n        img: (<div className=\"textbox\">\r\n            <div className=\"qn\">What do you want to learn from this VIA visit?</div>\r\n            <div className=\"ans\">I want to learn as much as possible.</div>\r\n        </div>),\r\n        text: \"During the facilitation session, one of your cadets set this goal for herself. Do you intervene?\",\r\n        option: [\r\n            {\r\n                text: \"Yes\",\r\n                next: \"A7\"\r\n            },\r\n            {\r\n                text: \"No\",\r\n                next: \"A10\",\r\n                fx: (flags) => { \r\n                    flags.cadetgoal = consts.cadetgoal.BAD;\r\n                    flags.decisionVisibility.cadetgoal = true;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    \r\n    \"A7\": {\r\n        img: (<div className=\"textbox\">\r\n            <div className=\"qn\">What do you want to learn from this VIA visit?</div>\r\n            <div className=\"ans\">I want to learn the stories of the children at the home.</div>\r\n        </div>),\r\n        text: \"She comes up with a new goal. Are you happy with this goal or do you want to set a goal for her?\",\r\n        option: [\r\n            {\r\n                text: \"This goal is good!\",\r\n                next: \"A9\",\r\n                fx: (flags) => { \r\n                    flags.cadetgoal = consts.cadetgoal.GOOD;\r\n                    flags.decisionVisibility.cadetgoal = true;\r\n                }\r\n            },\r\n            {\r\n                text: \"How about something else? You could try and learn how to solve the problems of the children.\",\r\n                next: \"A8\",\r\n                fx: (flags) => { \r\n                    flags.cadetgoal = consts.cadetgoal.NCO;\r\n                    flags.decisionVisibility.cadetgoal = true;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"A8\": {\r\n        bgm: 'chariots-of-fire.mp3',\r\n        img: (<NodeImg src=\"sunset.jpg\" alt=\"sunset\" />),\r\n        text: \"The training has ended and the cadets are clear of what will be happening during the VIA. However, the cadets looked quite bored when your committee tells them what their goal for the VIA should be...\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"S1\"\r\n        }]\r\n    },\r\n\r\n    \"A9\": {\r\n        bgm: 'chariots-of-fire.mp3',\r\n        img: () => askArcNodes[\"A8\"].img,\r\n        text: \"The training has ended and the cadets are clear of what will be happening during the VIA. Everyone is very excited!\",\r\n        option: [{\r\n            text: \"Let's hope the VIA goes well too!\",\r\n            next: \"S1\"\r\n        }]\r\n    },\r\n\r\n    \"A10\": {\r\n        bgm: 'chariots-of-fire.mp3',\r\n        img: () => askArcNodes[\"A8\"].img,\r\n        text: \"The training has ended and the cadets are clear of what will be happening during the VIA.\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"S1\"\r\n        }]\r\n    }\r\n\r\n}\r\n\r\nexport default askArcNodes;\r\n","import consts from './consts';\r\n\r\nexport const events = Object.values(consts.events);\r\n\r\nexport const getRandomEvent = () => {\r\n    return events[Math.floor(Math.random() * events.length)];\r\n}\r\n\r\nexport const doP9Check = (flags, altOption = \"P10\") => {\r\n    return (flags.midEvent === consts.events.MARGIN) ? \"P9\" : \r\n        (flags.midEvent === consts.events.REIMBURSEMENT) ? \"P9.5\" :\r\n        altOption;\r\n}\r\n\r\nexport const doP15Check = (flags) => {\r\n    return (flags.midEvent === consts.events.CHAPERONE) ? \"P15\" : \"A1\";\r\n}\r\n\r\nexport const doP5Check = (flags) => {\r\n    return (flags.midEvent === consts.events.ICE_CREAM) ? \"P4.5\" : \"P5\";\r\n}\r\n","import consts from '../consts'\r\nimport {allActivities} from '../consts'\r\nimport {events} from '../events';\r\nimport NodeImg from '../NodeImg'\r\n\r\nconst objToKeyValArray = (obj, keyPrefix = \"\") => {\r\n    return Object.entries(obj).map(([k, v]) => {\r\n        if (v instanceof Object) {\r\n            return objToKeyValArray(v, `${keyPrefix}${k}.`);\r\n        } else {\r\n            return `${keyPrefix}${k}: ${v}`;\r\n        }\r\n    });\r\n}\r\n\r\nconst devNodes = {\r\n    \r\n    \"dev0\": {\r\n        img: (<NodeImg ext=\"https://i.kym-cdn.com/photos/images/newsfeed/001/480/544/6c1.jpg\" />),\r\n        text: \"Hacker page wew\",\r\n        option: [\r\n            {\r\n                text: \"modify flags\",\r\n                next: \"dev1\"\r\n            },\r\n            {\r\n                text: \"jump sections\",\r\n                next: \"dev2\",\r\n            },\r\n            {\r\n                text: \"go back to last section\",\r\n                next: (flags) => flags.lastNode,\r\n            }\r\n        ]\r\n    },\r\n    \r\n    \"dev1\": {\r\n        text: (flags) => objToKeyValArray(flags).flat().join(' | '),\r\n        option: [\r\n            {\r\n                text: \"Change home\",\r\n                next: \"dev1\",\r\n                fx: (flags) => flags.name === consts.SESAME ? flags.name = consts.SUNSHINE : flags.name = consts.SESAME\r\n            },\r\n            {\r\n                text: \"Toggle call\",\r\n                next: \"dev1\",\r\n                fx: (flags) => flags.research.call = !flags.research.call,\r\n            },\r\n            {\r\n                text: \"Toggle freeTime\",\r\n                next: \"dev1\",\r\n                fx: (flags) => flags.research.freeTime = !flags.research.freeTime\r\n            },\r\n            {\r\n                text: \"Toggle recce\",\r\n                next: \"dev1\",\r\n                fx: (flags) => flags.research.recce = !flags.research.recce\r\n            },\r\n            {\r\n                text: \"Toggle brochure\",\r\n                next: \"dev1\",\r\n                fx: (flags) => flags.research.brochure = !flags.research.brochure\r\n            },\r\n            {\r\n                text: \"Change email\",\r\n                next: \"dev1\",\r\n                fx: (flags) => flags.research.email = (flags.research.email + 1) % 3\r\n            },\r\n            {\r\n                text: \"Change sessions\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    const allVals = Object.values(consts.sessions)\r\n                    if (allVals.includes(flags.sessions)) {\r\n                        flags.sessions = allVals[(allVals.indexOf(flags.sessions) + 1) % allVals.length]\r\n                    } else {\r\n                        flags.sessions = allVals[0]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                text: \"Change nco goal\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    const allVals = Object.values(consts.ncogoals)\r\n                    if (allVals.includes(flags.ncogoal)) {\r\n                        flags.ncogoal= allVals[(allVals.indexOf(flags.ncogoal) + 1) % allVals.length]\r\n                    } else {\r\n                        flags.ncogoal= allVals[0]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                text: \"Change activity\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    const allVals = Object.values(allActivities)\r\n                    if (allVals.includes(flags.activity)) {\r\n                        flags.activity = allVals[(allVals.indexOf(flags.activity) + 1) % allVals.length]\r\n                    } else {\r\n                        flags.activity = allVals[0]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                text: \"Change roles and goals\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    const allVals = Object.values(consts.rolesandgoals)\r\n                    if (allVals.includes(flags.rolesandgoals)) {\r\n                        flags.rolesandgoals= allVals[(allVals.indexOf(flags.rolesandgoals) + 1) % allVals.length]\r\n                    } else {\r\n                        flags.rolesandgoals= allVals[0]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                text: \"Change cadet goal\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    const allVals = Object.values(consts.cadetgoal)\r\n                    if (allVals.includes(flags.cadetgoal)) {\r\n                        flags.cadetgoal = allVals[(allVals.indexOf(flags.cadetgoal) + 1) % allVals.length]\r\n                    } else {\r\n                        flags.cadetgoal = allVals[0]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                text: \"Change results\",\r\n                next: \"dev1\",\r\n                fx: (flags) => { flags.result = (flags.result + 1) % 6; }\r\n            },\r\n            {\r\n                text: \"Change debrief\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    const allVals = Object.values(consts.debrief)\r\n                    if (allVals.includes(flags.debrief)) {\r\n                        flags.debrief= allVals[(allVals.indexOf(flags.debrief) + 1) % allVals.length]\r\n                    } else {\r\n                        flags.debrief= allVals[0]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                text: \"Change event\",\r\n                next: \"dev1\",\r\n                fx: (flags) => {\r\n                    if (events.includes(flags.midEvent)) {\r\n                        flags.midEvent = events[(events.indexOf(flags.midEvent) + 1) % events.length]\r\n                    } else {\r\n                        flags.midEvent = events[0]\r\n                    }\r\n                }\r\n\r\n            },\r\n            {\r\n                text: \"Done\",\r\n                next: \"dev0\"\r\n            }]\r\n    },\r\n    \r\n    \"dev2\": {\r\n        text: \"jump\",\r\n        option: [\r\n            {\r\n                text: \"Home\",\r\n                next: \"H0\"\r\n            },\r\n            {\r\n                text: \"Learn\",\r\n                next: \"L1\"\r\n            },\r\n            {\r\n                text: \"Plan\",\r\n                next: \"P1\"\r\n            },\r\n            {\r\n                text: \"Ask\",\r\n                next: \"A1\"\r\n            },\r\n            {\r\n                text: \"Serve\",\r\n                next: \"S1\"\r\n            },\r\n            {\r\n                text: \"Reflect\",\r\n                next: \"R1\"\r\n            },\r\n            {\r\n                text: \"End\",\r\n                next: \"END\"\r\n            }]\r\n    }\r\n}\r\n\r\nexport default devNodes\r\n","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst Stars = (props) => {\r\n    const { label, rating } = props;\r\n\r\n    const fillColor = (label === \"Service\") ? \"#8cf\" : \"#9b9\";\r\n    const maxStars = (label === \"Service\") ? 7 : 7;\r\n    const filledProps = { color: fillColor, opacity: 1 };\r\n    const unfilledProps = { opacity: 0.4 };\r\n\r\n    return (<div className=\"rating\">\r\n        <div className=\"rating-label\">{label}</div>\r\n        <div className=\"stars\">\r\n            {[...Array(maxStars)].map((_, i) => (<FontAwesomeIcon\r\n                icon={faStar}\r\n                key={i}\r\n                {...(i < rating ? filledProps : unfilledProps)}\r\n            />))}\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nexport default Stars\r\n","import React from \"react\"\r\nimport consts from \"./consts\"\r\nimport {icons} from \"./timeline\"\r\n\r\nexport const getLocationChoiceText = (homeName) => {\r\n    return [\r\n        `Your unit decided to visit ${homeName}.`,\r\n        homeName === consts.SESAME ?\r\n        (<React.Fragment>Your unit has a well-established relationship with {homeName}, so the children there are much more familiar with you. Hence, <span className=\"emph\">this decision was good</span> because <span className=\"emph\">sustained engagement with a target community builds trust</span> between the two of you, which makes any interaction that much more fruitful!</React.Fragment>) :\r\n        (<React.Fragment>As {homeName} is unfamiliar to your unit, the children there treat all of you as strangers in the beginning. It will take time to build up a good relationship with them. This choice reduced the effectiveness of this VIA project. You should <span className=\"emph\">consider a unit that you have already built up a sustained, trusting relationship with to eliminate this fear of strangers</span>.</React.Fragment>),\r\n        homeName === consts.SESAME ? icons.EXCELLENT : icons.BAD\r\n    ]\r\n}\r\n\r\nexport const getResearchTitleAndEntry = (researchState) => {\r\n\r\n    if (researchState.recce) {\r\n        return [\r\n            \"Your committee made a physical recce to the home before they started planning the VIA.\",\r\n            (<React.Fragment>By visiting the home personally, your committee was able to speak with the children beforehand and find out what the children would look forward. <span className=\"emph\">Hence, you could come up with ideas for activities more suited for the children at the home.</span> Good job! :D~</React.Fragment>),\r\n            icons.EXCELLENT\r\n        ];\r\n    }\r\n\r\n    if (researchState.freeTime) {\r\n        return [\r\n            \"Your committee called the Home Director before you started planning the VIA, learnt more about the home, and found out more about the activities which the children enjoy in their free time.\",\r\n            (<React.Fragment>Asking good questions during the call with the Home Director <span className=\"emph\">helped your committee learn more about activities which most of the children at the home enjoy</span>. That's great! Next time, you could consider <span className=\"emph\">physically visiting the home to get a more personal understanding of the children's wants</span>.</React.Fragment>),\r\n            icons.GOOD,\r\n        ];\r\n    }\r\n\r\n    if (researchState.brochure) {\r\n        return [\r\n            \"Your committee searched the internet for more information about the home.\",\r\n            (<React.Fragment>The brochure gave your committee a rough understanding of the home and you could guess some activities which the children enjoy. That's okay. Next time, you could <span className=\"emph\">contact the home (or better, visit them)</span> to better understand the home, <span className=\"emph\">which would help you think of more engaging activities to do</span>.</React.Fragment>),\r\n            icons.MEDIOCRE,\r\n        ]\r\n    }\r\n\r\n    if (researchState.call) {\r\n        return [\r\n            \"Your committee called the Home Director before you started planning the VIA, learnt more about the home, but did not find out much about what the children at the home would enjoy.\",\r\n            (<React.Fragment>This helped your committee understand more about the home, but didn't help you think of activities that would engage the children at the home. Perhaps you could have <span className=\"emph\">asked better questions about the needs of the children, or visited the home to directly find out the needs of the children</span>.</React.Fragment>),\r\n            icons.MEDIOCRE,\r\n        ]\r\n    }\r\n\r\n    if (researchState.email > 0) {\r\n        return [\r\n            \"Your committee sent an email to the home to ask about the children there, but did not receive any reply.\",\r\n            (<React.Fragment>As a result, you did not learn anything new about the home :( Perhaps you could have <span className=\"emph\">tried a more personal and direct means of obtaining more information about the home</span>.</React.Fragment>),\r\n                icons.BAD\r\n            ]\r\n    }\r\n\r\n    return [\r\n        \"Your committee jumped straight into planning without researching more about the home.\",\r\n        (<React.Fragment>Hence, when your committee came up with ideas for the VIA, you had many incorrect assumptions about the children at the home. :( Perhaps you could have <span className=\"emph\">learned more about the children at the home before planning the activities; this would have helped you think of more engaging activities</span>.</React.Fragment>),\r\n            icons.BAD\r\n        ];\r\n}\r\n\r\nexport const getNcoGoalTitleAndEntry = (ncoGoalState) => {\r\n    switch (ncoGoalState) {\r\n        case consts.ncogoals.NONE:\r\n            return [\r\n                \"Your committee started planning without setting any learning goals.\",\r\n                (<React.Fragment>Hence, your committee did not keep your own learning goals in mind when planning and executing the project. By not being intentional about learning, it is <span className=\"emph\">difficult for new learning points from this project to take root</span>. Perhaps it would have been beneficial to <span className=\"emph\">set such goals before planning begins</span>.</React.Fragment>),\r\n                icons.BAD,\r\n            ];\r\n\r\n        case consts.ncogoals.LEARN_STORIES_BEF_RESEARCH:\r\n        case consts.ncogoals.LEARN_STORIES_AFT_RESEARCH:\r\n        case consts.ncogoals.SOLVE_PROBLEMS_BEF_RESEARCH:\r\n        case consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH:\r\n        case consts.ncogoals.EXCITING_ACTIVITIES:\r\n            return [\r\n                \"You set learning goals for your committee before you started planning.\",\r\n                (<React.Fragment>While it is great that there are goals, <span className=\"emph\">people are unlikely to take ownership of goals they are uninterested in</span>. It would be difficult for new learning points from this project to take root. It would have been beneficial to <span className=\"emph\">let your committee set their own goals before planning begins</span>.</React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        case consts.ncogoals.NOT_SPECIFIC: \r\n            return [\r\n                \"You made your committee set learning goals for yourselves before they started planning.\",\r\n                (<React.Fragment>That's great! Perhaps you could push your committee's learning more by <span className=\"emph\">helping them craft more specific goals</span> [A Sec 2 set \"My goal is to learn how to plan\" as their goal]. <span className=\"emph\">Being specific encourages them to intentionally try out roles or actions</span> which helps them progress towards these goals. </React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        default:\r\n            return [\r\n                \"You guided your committee to set specific goals for yourselves before they started planning.\",\r\n                (<React.Fragment>As a result, <span className=\"emph\">they took ownership over their learning and intentionally worked towards the goals set</span>. At the very least, they would be more conscious of what they are doing, especially towards activities that are more relevant to what they want to learn. <span className=\"emph\">Good job!</span></React.Fragment>),\r\n                icons.EXCELLENT,\r\n            ];\r\n    }\r\n}\r\n\r\nexport const getNcoRnGTitleAndEntry = (ncoRnGState) => {\r\n    switch (ncoRnGState) {\r\n        case consts.rolesandgoals.NONE:\r\n        case consts.rolesandgoals.CHECK_ON_TIME:\r\n            return [\r\n                \"You let the committee figure out their various roles, and the goals of these roles themselves.\",\r\n                (<React.Fragment>As a result, <span className=\"emph\">they could take full ownership</span> and adjust the roles towards what each of them want to do. They would also be more motivated to work on and do well in the project. Great choice!</React.Fragment>),\r\n                icons.EXCELLENT,\r\n            ];\r\n\r\n        case consts.rolesandgoals.TRADITION:\r\n            return [\r\n                \"You asked the committee to just follow the previous year's roles and goals.\",\r\n                (<React.Fragment>While this helps them figure out their operations easily, some members disagree with their responsibilities as they were interested in other responsibilities. Some felt uninterested, resulting in others having to tank the project. Perhaps it would be helpful to <span className=\"emph\">let them set their own roles and goals in the future</span>.</React.Fragment>),\r\n                icons.BAD,\r\n            ];\r\n\r\n        case consts.rolesandgoals.OIC:\r\n            return [\r\n                \"You asked the Admin IC and Admin 2ICs to just set the roles and goals for the rest of the batch.\",\r\n                (<React.Fragment>While this helps them figure out their operations easily, some members disagree with their responsibilities as they were interested in other responsibilities. Some felt uninterested, causing others having to tank the project. Perhaps it would be helpful to <span className=\"emph\">facilitate the committee to set their roles and goals in the future</span>.</React.Fragment>),\r\n                icons.BAD,\r\n            ];\r\n\r\n        default: {\r\n            const varpart = ncoRnGState === consts.rolesandgoals.SCOLD ? \"you scolded\" : \"you asked your YO to scold\";\r\n            return [\r\n                `You did not give your committee an opportunity to set their own roles and goals. Instead of finding out why they were not doing their work, ${varpart} them.`,\r\n                (<React.Fragment>That got the job done but some members only did their responsibilities out of obligation. This encouraged poor quality work and restricted learning as they were not engaged with their tasks. Perhaps it would be helpful to <span className=\"emph\">facilitate the committee to set their roles and goals in future</span>.</React.Fragment>),\r\n                icons.BAD\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\nexport const getCadetGoalTitleAndEntry = (cadetGoalState) => {\r\n    switch (cadetGoalState) {\r\n        case consts.cadetgoal.NONE: \r\n            return [\r\n                \"Your unit did not conduct a goal-setting session for the cadets the training before the VIA.\",\r\n                (<React.Fragment>As a result, the cadets did not keep their learning goals in mind during the VIA. By being unintentional about learning, it is <span className=\"emph\">difficult for new learning points from this project to take root</span> within the cadets. Perhaps it would be beneficial in future to <span className=\"emph\">set goals before VIA sessions</span>.</React.Fragment>),\r\n                icons.BAD,\r\n            ];\r\n\r\n        case consts.cadetgoal.NCO:\r\n            return [\r\n                \"Your committee set learning goals for the cadets to achieve during the VIA.\",\r\n                (<React.Fragment>While goals were set, <span className=\"emph\">cadets are unlikely to accept goals your committee set</span>, as they may want to learn something else. Learning becomes unintentional, making it difficult for cadets to gain new learning points. In future, perhaps guide/facilitate <span className=\"emph\">the cadets to set their own goals before VIA sessions</span>.</React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        case consts.cadetgoal.BAD:\r\n            return [\r\n                \"Your unit conducted a goal-setting session for the cadets during the training before the VIA. Some of the cadets set vague goals.\",\r\n                (<React.Fragment>It's great that cadets set their own goals! Perhaps you could push cadets' learning even further by helping them craft more specific goals [A cadet set \"I want to learn as much as possible\" as their goal]. Being specific helps cadets intentionally try out actions to work towards these goals. In future, <span className=\"emph\">consider facilitating your cadets to develop their goals towards more specific ones</span>.</React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        default:\r\n            return [\r\n                \"Your unit conducted a goal-setting session for the cadets during the training before the VIA. The goals set were very specific.\",\r\n                (<React.Fragment>As a result, the cadets <span className=\"emph\">took ownership over their learning and intentionally worked towards the goals set</span>. At the very least, they would be more conscious of what they are doing, especially towards activities that are more relevant to what they want to learn. Good job!</React.Fragment>),\r\n                icons.EXCELLENT,\r\n            ]\r\n    }\r\n}\r\n\r\nexport const getChitChatTitleAndEntry = (activity, chitChatAfter) => {\r\n    if (chitChatAfter) {\r\n        return [\r\n            \"Your cadets chit-chatted with the children at the home during the VIA project.\",\r\n            (<React.Fragment>Chit-chatting is good as it lets your cadets build rapport with the children at the home. Ultimately, the goal of your home visit is here to engage and emotionally connect with the children at your home, and <span className=\"emph\">conversation allows them to establish that emotional connection</span>. Good job! :D</React.Fragment>),\r\n            icons.EXCELLENT\r\n        ];\r\n    }\r\n\r\n    return [\r\n        `Despite the poor response from the children towards your unit's VIA, your cadets continued to ${activity}.`,\r\n        (<React.Fragment>As your cadets never chatted with the children at the home, <span className=\"emph\">they never made an emotional connection with the children</span> :( Remember that ultimately, you want to engage and connect with the children through the VIA. Perhaps next time you could <span className=\"emph\">encourage your cadets to chit-chat instead</span>.</React.Fragment>),\r\n        icons.BAD,\r\n    ]\r\n}\r\n\r\nconst debriefPerhapsClause = <React.Fragment>VIAs aren't just for our cadets to serve the community; they are also for our cadets to learn new skills and better understand and empathize with others in our society. <span className=\"emph\">Consider debriefing both cadets and NCOs after each VIA session in the future</span>.</React.Fragment>\r\n\r\nexport const getDebriefTitleAndEntry = (debriefState) => {\r\n    switch (debriefState) {\r\n        case consts.debrief.NCO:\r\n            return [\r\n                \"Only your committee was debriefed after the VIA.\",\r\n                (<React.Fragment><span className=\"emph\">Debriefs are important in eliciting learning from raw experiences.</span> Without the consolidation, learning could be lost :( {debriefPerhapsClause}</React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        case consts.debrief.CADET:\r\n            return [\r\n                \"Only the cadets were debriefed after the VIA.\",\r\n                (<React.Fragment><span className=\"emph\">Debriefs are important in eliciting learning from raw experiences.</span> Without the consolidation, learning could be lost :( {debriefPerhapsClause}</React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        case consts.debrief.BOTH:\r\n            return [\r\n                \"Both the cadets and your committee were debriefed after the VIA.\",\r\n                (<React.Fragment>By having debriefs, <span className=\"emph\">cadets and your committee can consolidate and think about what they learnt and can learn from their experiences</span>. The debriefs helped to maximize your unit's learning from this VIA and cadets were able to learn new skills and empathize with people in our society. Well done :D</React.Fragment>),\r\n                icons.EXCELLENT,\r\n            ];\r\n\r\n        default:\r\n            return [\r\n                \"No debriefs were carried out after the VIA.\",\r\n                (<React.Fragment><span className=\"emph\">Debriefs are important in eliciting learning from raw experiences.</span> Without the consolidation, learning could be lost :( {debriefPerhapsClause}</React.Fragment>),\r\n                icons.BAD,\r\n            ];\r\n    }\r\n}\r\n","import {faChevronDown, faChevronUp, faGrinStars, faSmile, faMeh, faFrown} from '@fortawesome/free-solid-svg-icons';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport {getCadetGoalTitleAndEntry, getChitChatTitleAndEntry, getDebriefTitleAndEntry, getLocationChoiceText, getNcoGoalTitleAndEntry, getNcoRnGTitleAndEntry, getResearchTitleAndEntry} from './analysis';\r\nimport consts from './consts';\r\nimport './timeline.css';\r\n\r\nexport const icons = {\r\n    EXCELLENT: [faGrinStars, '#8bc34a'],\r\n    GOOD: [faSmile, '#ffeb3b'],\r\n    MEDIOCRE: [faMeh, '#ff9100'],\r\n    BAD: [faFrown, '#f44336'],\r\n}\r\n\r\nexport const SimpleEntry = (props) => {\r\n    const { children } = props;\r\n\r\n    return (<div className=\"container\">\r\n        <div className=\"container-left\">\r\n            <div className=\"titleContainer\">\r\n                <div className=\"title\">{children}</div>\r\n            </div>\r\n        </div>\r\n        </div>)\r\n}\r\n\r\nexport const Entry = (props) => {\r\n    const { arc, title, keyword, type, icon = icons.BAD, children } = props;\r\n\r\n    const [expanded, setExpanded] = React.useState(false);\r\n\r\n    const keywordClass = type === \"Service\" ? 'service' : 'learning';\r\n    const [iconMeta, iconColor] = icon;\r\n\r\n    const handleButtonClick = () => {\r\n        setExpanded(!expanded);\r\n    }\r\n\r\n    return (<div className=\"container\">\r\n        <div className=\"container-left\">\r\n            <div className=\"topText\"><span className=\"arcName\">{arc}</span> {arc && '\\u2022'} <span className={keywordClass}>{keyword}</span></div>\r\n            <div className=\"titleContainer\">\r\n                <div className=\"title\">{title}</div>\r\n            </div>\r\n            {expanded && <div className=\"content\">{children}</div>}\r\n        </div>\r\n        <FontAwesomeIcon icon={iconMeta} color={iconColor} size=\"lg\" />\r\n        {children && <div className=\"iconBtn\" onClick={handleButtonClick}><FontAwesomeIcon icon={expanded ? faChevronUp : faChevronDown} /></div>}\r\n    </div>)\r\n}\r\n\r\nconst getActivityDescription = (activity) => {\r\n    switch (activity) {\r\n        case consts.activities.SOCCER: \r\n            return [\r\n                (<React.Fragment>Most (but not all of the children) enjoy soccer. As a result, most of them had great fun playing, and a break away from the boredom of daily life. This is a <span className=\"emph\">decent (but not the best) choice as you fulfilled the needs of most of the children</span> there.</React.Fragment>), \r\n                icons.GOOD\r\n            ]\r\n\r\n        case consts.activities.KITE:\r\n            return [\r\n                (<React.Fragment>All of the children enjoy kite-fighting. As a result, they had incredible fun playing, a great break away from their usual routines. Nice! <span className=\"emph\">This is the best choice as you fulfilled the needs of all of the children there.</span></React.Fragment>),\r\n                icons.EXCELLENT\r\n            ]\r\n\r\n        case consts.activities.CHIT_CHAT:\r\n            return [\r\n                (<React.Fragment>During the chit-chat session, the children were happy to share about their lives, however, they hoped for more excitement. This is a decent option, though <span className=\"emph\">there are more exciting activities</span> that the children enjoy. Try <span className=\"emph\">learning more about the children</span> before planning the best activity to fulfil all their needs.</React.Fragment>),\r\n                icons.MEDIOCRE\r\n            ]\r\n\r\n        default:\r\n            return [\r\n                (<React.Fragment><span className=\"emph\">This wasn't very effective at engaging the children</span> as many of them returned to their regular routines instead. Perhaps it would be good to <span className=\"emph\">find out more about the children before planning</span> next time?</React.Fragment>),\r\n                icons.BAD\r\n            ]\r\n    }\r\n}\r\n\r\nconst getSessionsTitleAndEntry = (sessionsState) => {\r\n    switch (sessionsState) {\r\n        case consts.sessions.ONE:\r\n            return [\r\n                `Your unit chose to have only ${sessionsState}.`,\r\n                (<React.Fragment>After the VIA, the children wonder if any of you will be back ever again? They miss you. This choice does not help to build trust with the home's residents. <span className=\"emph\">Consider having more sustained engagement</span> with them instead (short sessions are ok, it's more important to be regular).</React.Fragment>),\r\n                icons.BAD,\r\n            ];\r\n\r\n        case consts.sessions.TWO_TGT:\r\n            return [\r\n                `Your unit chose to have only ${sessionsState}.`,\r\n                (<React.Fragment>After the two sessions, the children look forward to the third, but it never happened... They miss you. This choice does not help to build trust with the home's residents. <span className=\"emph\">Consider having more sustained engagement</span> with them instead (short sessions are ok, it's more important to be regular).</React.Fragment>),\r\n                icons.MEDIOCRE,\r\n            ];\r\n\r\n        default:\r\n            return [\r\n                `Your unit chose to have ${sessionsState}.`,\r\n                (<React.Fragment>By <span className=\"emph\">continuously engaging with the home</span>, you managed to <span className=\"emph\">build a long-lasting and trusting relationship</span> with the home, enhaning the effectivenss of any service learning project with them. Good choice!</React.Fragment>),\r\n                icons.EXCELLENT,\r\n            ];\r\n    }\r\n}\r\n\r\nconst Timeline = (props) => {\r\n    const { flags } = props;\r\n\r\n    const [locationChoiceTitle, locationChoiceEntry, locationChoiceIcon] = getLocationChoiceText(flags.name);\r\n\r\n    const [researchTitle, researchEntry, researchIcon] = getResearchTitleAndEntry(flags.research);\r\n    const [ncoGoalTitle, ncoGoalEntry, ncoGoalIcon] = getNcoGoalTitleAndEntry(flags.ncogoal);\r\n    const [activityEntry, activityIcon] = getActivityDescription(flags.activity);\r\n    const [ncoRnGTitle, ncoRnGEntry, ncoRnGIcon] = getNcoRnGTitleAndEntry(flags.rolesandgoals);\r\n    const [sessionsTitle, sessionsEntry, sessionsIcon] = getSessionsTitleAndEntry(flags.sessions);\r\n    const [cadetGoalTitle, cadetGoalEntry, cadetGoalIcon] = getCadetGoalTitleAndEntry(flags.cadetgoal);\r\n    const [chitChatTitle, chitChatEntry, chitChatIcon] = getChitChatTitleAndEntry(flags.activity, flags.finalChitChat);\r\n    const [debriefTitle, debriefEntry, debriefIcon] = getDebriefTitleAndEntry(flags.debrief);\r\n\r\n    return (<div className=\"timeline\">\r\n        <Entry arc=\"VIA Choice\" type=\"Service\" keyword=\"Sustainability\" title={locationChoiceTitle} icon={locationChoiceIcon}>\r\n            {locationChoiceEntry}\r\n        </Entry>\r\n        <Entry arc=\"1. Learn\" type=\"Learning\" keyword=\"Individual Learning\" title={ncoGoalTitle} icon={ncoGoalIcon}>\r\n            {ncoGoalEntry}\r\n        </Entry>\r\n        <Entry arc=\"1. Learn\" type=\"Service\" keyword=\"Meaningful Service\" title={researchTitle} icon={researchIcon}>\r\n            {researchEntry}\r\n        </Entry>\r\n        <Entry arc=\"2. Plan\" type=\"Service\" keyword=\"Meaningful Service\" title={`Your unit decided to ${flags.activity}.`} icon={activityIcon}>\r\n            {activityEntry}\r\n        </Entry>\r\n        <Entry arc=\"2. Plan\" type=\"Learning\" keyword=\"Individual Learning\" title={ncoRnGTitle} icon={ncoRnGIcon}>\r\n            {ncoRnGEntry}\r\n        </Entry>\r\n        <Entry arc=\"VIA Choice\" type=\"Service\" keyword=\"Sustainability\" title={sessionsTitle} icon={sessionsIcon}>\r\n            {sessionsEntry}\r\n        </Entry>\r\n        <Entry arc=\"3. Ask\" type=\"Learning\" keyword=\"Individual Learning\" title={cadetGoalTitle} icon={cadetGoalIcon}>\r\n            {cadetGoalEntry}\r\n        </Entry>\r\n        <Entry arc=\"4. Serve\" type=\"Service\" keyword=\"Meaningful Service\" title={chitChatTitle} icon={chitChatIcon}>\r\n            {chitChatEntry}\r\n        </Entry>\r\n        <Entry arc=\"5. Reflect\" type=\"Learning\" keyword=\"Reciprocity\" title={debriefTitle} icon={debriefIcon}>\r\n            {debriefEntry}\r\n        </Entry>\r\n    </div>);\r\n}\r\n\r\nexport default Timeline;\r\n","import React from 'react'\r\nimport consts from '../consts'\r\nimport {getInitialFlags} from '../Game'\r\nimport Stars from '../stars'\r\nimport Timeline from '../timeline'\r\n\r\n/*\r\n * NCO goal = 3 stars (1 if not perfect, 0 if none + 1 for doing debrief)\r\n * Cadet goal = 3 stars (1 if not perfect, 0 if none + 1 for doing debrief)\r\n * rolesandgoals = 1 star (only for facil and no action)\r\n */\r\nconst calculateLearningScore = (flags) => {\r\n    let score = 0\r\n    switch(flags.ncogoal) {\r\n        case consts.ncogoals.NONE:\r\n            break\r\n        case consts.ncogoals.VI:\r\n            score += 1\r\n            break\r\n        case consts.ncogoals.NOT_SPECIFIC:\r\n            score += 1\r\n            break\r\n        case consts.ncogoals.NCO:\r\n            score += 2\r\n            break\r\n        default:\r\n            break\r\n    }\r\n    \r\n    switch(flags.rolesandgoals) {\r\n        case consts.rolesandgoals.CHECK_ON_THEM:\r\n            score += 1\r\n            break\r\n        case consts.rolesandgoals.NONE:\r\n            score += 1\r\n            break\r\n        default:\r\n            break\r\n    }\r\n    \r\n    switch(flags.cadetgoal) {\r\n        case consts.cadetgoal.NCO:\r\n            score += 1\r\n            break\r\n        case consts.cadetgoal.BAD:\r\n            score += 1\r\n            break\r\n        case consts.cadetgoal.GOOD:\r\n            score += 2\r\n            break\r\n        default:\r\n            break\r\n    }\r\n    \r\n    switch(flags.debrief) {\r\n        case consts.debrief.NCO:\r\n            score += 1\r\n            break\r\n        case consts.debrief.CADET:\r\n            score += 1\r\n            break\r\n        case consts.debrief.BOTH:\r\n            score += 2\r\n            break\r\n        default:\r\n            break\r\n    }\r\n    \r\n    return score\r\n}\r\n\r\nconst getEndingBgm = (score, noTimeToDebriefCadets) => {\r\n    if (noTimeToDebriefCadets && score <= 8) return;\r\n\r\n    if (score <= 0) {\r\n        return 'astronomia.mp3';\r\n    } else if (score <= 3) {\r\n        return 'i-am-glad.mp3';\r\n    } else if (score <= 6) {\r\n        return 'determination.mp3';\r\n    } else if (score <= 10) {\r\n        return 'raining-somewhere-else.mp3'\r\n    } else if (score <= 13) {\r\n        return 'gate-of-steiner.mp3'\r\n    } else {\r\n        return 'hopes-and-dreams.mp3'\r\n    }\r\n}\r\n    \r\n\r\nconst endNodes = {\r\n    \r\n    \"END\": {\r\n        img: (<img />),\r\n        text: \"The VIA is finally over! What a long journey it has been. As you start to walk home from school, you can't help but think about how your cadets and NCOs have done...\",\r\n        option: [{\r\n            text: \"Did they learn?\",\r\n            next: (flags) => {\r\n                const score = calculateLearningScore(flags)\r\n                if (score < 5) {\r\n                    return \"end0\"\r\n                } else if (score < 7) {\r\n                    return \"end1\"\r\n                } else if (score === 7) {\r\n                    return \"end2\"\r\n                }            \r\n            }\r\n        }]\r\n    },\r\n        \r\n    \r\n    \"end0\": {\r\n        img: (flags) => (<Stars label=\"Learning\" rating={calculateLearningScore(flags)} />),\r\n        text: \"The VIA was certainly an interesting experience, but you can't help but wonder if your cadets have really learnt much through this VIA experience. What will they remember after a few months?\",\r\n        option: [{\r\n            text: \"End game and view results\",\r\n            next: \"ANALYSIS\"\r\n        }]\r\n    },\r\n    \r\n    \"end1\": {\r\n        img: (flags) => (<Stars label=\"Learning\" rating={calculateLearningScore(flags)} />),\r\n        text: \"The VIA was definitely an interesting and fruitful experience for you and your unit. You could tell that your NCOs and cadets have grown much. However, you can't help but wonder - how can you push them to be even clearer and active in their learning?\",\r\n        option: [{\r\n            text: \"End game and view results\",\r\n            next: \"ANALYSIS\"\r\n        }]\r\n    },\r\n    \r\n    \"end2\": {\r\n        img: (flags) => (<Stars label=\"Learning\" rating={calculateLearningScore(flags)} />),\r\n        text: \"The VIA was an amazing learning experience for both you and your cadets. Scanning through some of your their reflections amazed you at just how much thought they had put into this whole experience. This entire project was hard work, but certainly pushed them evermoreso closer to being a humanitarian youth who uplifts the community around them!\",\r\n        option: [{\r\n            text: \"End game and view results\",\r\n            next: \"ANALYSIS\"\r\n        }]\r\n    },\r\n    \r\n    \"ANALYSIS\": {\r\n        bgm: (flags) => getEndingBgm(flags.result + calculateLearningScore(flags), flags.noTimeToDebriefCadets),\r\n        img: (flags) => (<React.Fragment>\r\n            <Stars label=\"Service\" rating={flags.result} />\r\n            <Stars label=\"Learning\" rating={calculateLearningScore(flags)} />\r\n        </React.Fragment>),\r\n        text: (flags) => {\r\n            return (<div className=\"analysis\">\r\n                <h3>Major decisions made</h3>\r\n                <Timeline flags={flags} />\r\n                <p>You have come to the end of the game. We recommend that you play the game at least twice! After your second playthrough, we would also love to hear your feedback at <a href=\"https://tinyurl.com/viadvfeedback\" target=\"_blank\" rel=\"noreferrer\">tinyurl.com/viadvfeedback</a>!</p>\r\n            </div>)\r\n        },\r\n        option: [{\r\n            text: \"Play Again!!\",\r\n            next: \"H0\",\r\n            fx: (flags) => {\r\n                Object.assign(flags, getInitialFlags());\r\n            }\r\n        }]\r\n    }\r\n        \r\n    \r\n}\r\n\r\nexport default endNodes\r\n","import React from 'react';\r\nimport consts from '../consts';\r\nimport {getRandomEvent} from '../events';\r\nimport NodeImg from '../NodeImg';\r\n\r\nconst homeArcNodes = {\r\n    \"H0\": {\r\n        img: <NodeImg src=\"sl-gold.png\" alt=\"SL badge\" width=\"200\" />,\r\n        text: () => (<React.Fragment>\r\n            <p>Welcome to the Service Learning VIA Adventure! This is a Choose Your Own Adventure-style of game.\r\n            Be prepared to make a lot of choices. Some of these choices will matter, some of these won't.</p>\r\n            <p>Use the button on the top right corner (or swipe left) to open up the sidebar, which will contain a list of all the important decisions you have made so far in the game. It also allows you to change the volume of the music.</p>\r\n            <p>Press either button below to start.</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Start\",\r\n                next: \"H1\"\r\n            },\r\n            {\r\n                text: \"START BUT IN CAPS\",\r\n                next: \"H1\"\r\n            },\r\n            {\r\n                text: \"Start (Mobile Data-friendly)\",\r\n                next: \"H0.5\"\r\n            },\r\n        ]\r\n    },\r\n\r\n    \"H0.5\": {\r\n        img: <NodeImg src=\"school.jpg\" alt=\"Chai Chee Secondary School\" />,\r\n        text: \"It is July 2021, and you are the OIC of one of your unit's Service Learning Project. Your teacher has asked you to recommend a VIA project for the unit to do.\",\r\n        option: [\r\n            {\r\n                text: \"Home Visit\",\r\n                next: \"H3\"\r\n            },\r\n            {\r\n                text: \"First Aid Duty for Inter-School Sports Day\",\r\n                next: \"H2\"\r\n            }]\r\n    },\r\n    \r\n    \"H1\": {\r\n        img: <NodeImg src=\"school.jpg\" alt=\"Chai Chee Secondary School\" />,\r\n        bgm: 'mii.mp3',\r\n        text: \"It is July 2021, and you are the OIC of one of your unit's Service Learning Project. Your teacher has asked you to recommend a VIA project for the unit to do.\",\r\n        option: [\r\n            {\r\n                text: \"Home Visit\",\r\n                next: \"H3\"\r\n            },\r\n            {\r\n                text: \"First Aid Duty for Inter-School Sports Day\",\r\n                next: \"H2\"\r\n            }]\r\n    },\r\n\r\n    \"H2\": {\r\n        img: <NodeImg src=\"pepecry.png\" />,\r\n        text: \"Unfortunately, due to COVID, the event got cancelled :(\",\r\n        option: [\r\n            {\r\n                text: \"Home Visit it is\",\r\n                next: \"H3\"\r\n            }]\r\n    },\r\n\r\n    \"H3\": {\r\n        img: (<div className=\"img-group-h3\">\r\n            <NodeImg src=\"sesamestreeticon.png\" alt=\"Sesame Street logo\" />\r\n            <NodeImg src=\"sunshineicon.png\" alt=\"Sunshine logo\" />\r\n            </div>),\r\n        text: `Your teacher has identified 2 possible beneficiaries for your home visit. The first is ${consts.SESAME} that your unit has visited before in 2018 and 2019. The second option is ${consts.SUNSHINE}, which your unit has never visited before, but is nearer to your school. Which beneficiary would you recommend?`,\r\n        option: [\r\n            {\r\n                text: consts.SESAME,\r\n                next: \"L1\",\r\n                fx: (flags) => { \r\n                    flags.name = consts.SESAME;\r\n                    flags.midEvent = getRandomEvent();\r\n                },\r\n            },\r\n            {\r\n                text: consts.SUNSHINE,\r\n                next: \"L1\",\r\n                fx: (flags) => { \r\n                    flags.name = consts.SUNSHINE \r\n                    flags.midEvent = getRandomEvent();\r\n                },\r\n            }]\r\n    },\r\n}\r\n\r\nexport default homeArcNodes;\r\n","import clsx from 'clsx';\r\nimport React from 'react';\r\n\r\n/*\r\n * Schema of state:\r\n * askedQns: list of indices of asked questions\r\n */\r\n\r\nconst askedQnsReducer = (state, action) => {\r\n    return [...state, action];\r\n}\r\n\r\nconst createAvailableQnGetter = (numOfLines) => (askedQns) => \r\n    [...Array(numOfLines)].map((_, i) => i).filter((i) => !askedQns.includes(i));\r\n\r\nconst Dialogue = (props) => {\r\n    const { \r\n        startOfConvo, \r\n        speakerClass, \r\n        convos, \r\n        name, \r\n        availableQnGetter = createAvailableQnGetter(convos.length), \r\n        maxQns = convos.length,\r\n        endOfConvo = \"\"\r\n    } = props;\r\n    \r\n\r\n    const [askedQns, addQn] = React.useReducer(askedQnsReducer, []); //count using askedQns.length, compare with max\r\n    const combinedSpeakerClass = clsx('other-speech', speakerClass);\r\n\r\n    const availableQns = availableQnGetter(askedQns);\r\n\r\n    const createButtonHandler = (qnIndex) => () => {\r\n        addQn(qnIndex);\r\n    }\r\n    \r\n    const qnsLeft = maxQns - askedQns.length\r\n\r\n    return (<div className=\"dialogue-container\">\r\n        <div>You talk to {name}.</div>\r\n        {startOfConvo && <div className={combinedSpeakerClass}>{startOfConvo}</div>}\r\n        {askedQns.map((qnIndex) => (<React.Fragment key={qnIndex}>\r\n            <div className=\"self-speech\">{convos[qnIndex].q}</div>\r\n            {convos[qnIndex].a.map((ans, i) => (\r\n                <div key={i} class={combinedSpeakerClass}>{ans}</div>\r\n            ))}\r\n        </React.Fragment>))}\r\n        <div className=\"btn-container\" style={{display: (maxQns !== null && qnsLeft < 1) ? \"none\" : \"inherit\"}}>\r\n            {availableQns.map((qnIndex) => <button key={qnIndex} onClick={createButtonHandler(qnIndex)}>\r\n            {convos[qnIndex].q}\r\n            </button>)}\r\n        </div>\r\n        {/*number of questions left message*/}\r\n        {\r\n        maxQns !== null && <p className=\"informative\">{qnsLeft > 0 ? `You can ask ${name} ${qnsLeft} more question` + (qnsLeft === 1 ? \"\" : \"s\") : `${name} is done with your questions`}</p>\r\n        }\r\n        { endOfConvo && (availableQns.length === 0 || (maxQns !== null && qnsLeft === 0)) && <p>{endOfConvo}</p> }  \r\n    </div>)\r\n}\r\n\r\nexport default Dialogue;\r\n","const scroogeConvos = [\r\n    {\r\n        q: \"What is your biggest worry about the home?\",\r\n        a: [\"My number one worry is the budget. We don't have enough donations, so we really cannot afford to overspend!\"],\r\n    },\r\n    {\r\n        q: \"What do you think about volunteering?\",\r\n        a: [\r\n            \"I would appreciate any volunteers who come and keep the children company. Especially those who can commit long-term in helping us with our programs!\", \r\n            \"But, honestly, I would rather receive money than volunteers; we barely have enough to keep the lights on.\"\r\n        ],\r\n    },\r\n    {\r\n        q: \"How is the condition of the home?\",\r\n        a: [\"I live here too and the conditions are really... ugh.... I don't want to talk about it.\"],\r\n    },\r\n    {\r\n        q: \"What are your hopes for the children?\",\r\n        a: [\r\n            \"To be frank, I really hope that they will get adopted so that the budget can be spread less thinly.\",\r\n            \"It's quite sad that they have to live in such poor conditions. I feel bad for them, they deserve better lives than this...\"\r\n        ]\r\n    },\r\n    {\r\n        q: \"How hard is it to manage the home?\",\r\n        a: [\"Well, honestly, I'm hoping that someone will come along to help me with managing the home. There's just too much work for the few of us. But with our budget, it's really hard to hire another person...\"]\r\n    },\r\n    {\r\n        q: \"What are your hobbies?\",\r\n        a: [\"Hmm... Watching TV? Don't tell anyone, but I love romance series. Maybe if we have the budget one day, I'll get a Netflix subscription for the entire home...\"]\r\n    }\r\n]\r\n\r\nexport default scroogeConvos;\r\n","const jonConvos = [\r\n    {\r\n        q: \"How's school?\",\r\n        a: [\r\n            \"I go to Khairuddin Secondary School.\",\r\n            \"I don't really like school. I'm usually very tired in school, school is so boring...\",\r\n            \"My grades aren't really very good... Maybe it's because of how tired and hungry that I am all the time.\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you like to eat?\",\r\n        a: [\r\n            \"I wouldn't really know... I don't have money for recess/lunch sometimes, often all I can buy is rice and one simple vegetable, Sometimes, I can't even afford that and just have to go hungry...\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you do outside of school?\",\r\n        a: [\r\n            \"I work to distribute newspapers very early in the morning to earn money.\",\r\n            \"In my little free time, I love playing soccer! Oh I also like to do kite fighting, if you know what that is hehe...\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What are your plans for the future?\",\r\n        a: [\r\n            \"I don't really know. I wonder what will happen to me once I have to leave the home once I am too old to stay here, there's no way I can afford a place to stay and have food...\",\r\n            \"But my dream is to become a chef so that I can cook my own great food someday! I watch Masterchef every time it comes on the TV.\"\r\n        ]\r\n    },\r\n]\r\n\r\nexport default jonConvos;\r\n","const allamConvos = [\r\n    {\r\n        q: \"How's school?\",\r\n        a: [\"I don't go to school - I got like 130 or something for PSLE, then I dropped out of Secondary School.\",\r\n],\r\n    },\r\n    {\r\n        q: \"What do you do usually?\",\r\n        a: [\r\n            \"I work part-time at several shops for some small amount to settle food.\",\r\n            \"How do I get hired while being so young? Don't tell anyone, but it's all sneaky sneaky. If anyone asks, I'm 16.\"\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you like to listen to?\",\r\n        a: [\r\n            \"Rap music is the best! I first heard some of the popular rap songs while at work and really like them. I can really feel the meaning in the words for these songs!\",\r\n            \"I hope that one that I can become a rapper too, they are soooo cool.\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you do in your free time?\",\r\n        a: [\r\n            \"Football? Go Chelsea!! I'm not really good at playing football, but it's still pretty fun. I like kite fighting too!\",\r\n        ]\r\n    },\r\n]\r\n\r\nexport default allamConvos;\r\n","const emilyConvos = [\r\n    {\r\n        q: \"How's school?\",\r\n        a: [\"I go to Chai Chee Primary School. School's great, I think I'm doing pretty ok :D\",\r\n            \"I have a few friends in school. Not really in with the cool kids but not bullied or anything, schools fine.\"],\r\n    },\r\n    {\r\n        q: \"What's that you're reading?\",\r\n        a: [\r\n            \"It's Harry Potter and the Prisoner of Azkaban! Harry Potter is one of my favourite series.\",\r\n            \"I love reading! Sadly it's so dark here with all the lights off that it's difficult to be able to read properly, but I still try.\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you think about the other children here?\",\r\n        a: [\"The others... they aren't that cool, seems like they usually spend their time earning money and doing chores. What a waste of time, they could be reading instead!\"],\r\n    },\r\n    {\r\n        q: \"What do you do in your free time?\",\r\n        a: [\r\n            \"As you can probably tell, I love reading! Hehe. Other than that... I don't really enjoy soccer, but kite-fighting is definitely ten out of ten fun!\",\r\n            \"It's also great fun to chit chat! Even if my life isn't very exactly interesting to talk about. Come back to talk to me again!\"\r\n        ]\r\n    },\r\n]\r\n\r\nexport default emilyConvos;\r\n","const carmenConvos = [\r\n    {\r\n        q: \"How's school?\",\r\n        a: [\"School? I go to Chai Chee Primary.\",\r\n            \"Yeah, I'm doing OK, not first place, but don't think I'm doing too bad... Oh? Yeah, I guess my uniform is pretty nasty looking; it's dirty and patched from all the times those evil P6 kids tear them.\" ],\r\n    },\r\n    {\r\n        q: \"What do you wish to be?\",\r\n        a: [\r\n            \"I wish I could be like Emily, she's doing so well in school, like a queen...\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you like to watch?\",\r\n        a: [\"My favourite show is We Bare Bears! Oh my just look at Icebear he's sooooooo cute and his story is soooooo sad but beautiful.\",\r\n            \"As for movies... Cars is great. I used to have a toy car that looks just like the red one in the movie, but someone threw it away one day. How dare they :(\",\r\n        ],\r\n    },\r\n    {\r\n        q: \"What do you do outside of school?\",\r\n        a: [\r\n            \"We all have to play a part in doing housework, so I do mine as best as I can, but sometimes I get injured especially in our really slippery kitchen. So I don't really like doing that.\",\r\n            \"But when I have free time... Football and kite-fighting are great fun!\"\r\n        ]\r\n    },\r\n]\r\n\r\nexport default carmenConvos;\r\n","import clsx from 'clsx';\r\nimport React from 'react';\r\n\r\n/*\r\n * Schema of state:\r\n * askedQns: list of indices of asked questions\r\n */\r\n\r\nconst askedQnsReducer = (state, action) => {\r\n    return [...state, action];\r\n}\r\n\r\nconst createAvailableQnGetter = (numOfLines) => (askedQns) => \r\n    [...Array(numOfLines)].map((_, i) => i).filter((i) => !askedQns.includes(i));\r\n\r\n/*\r\n * cssClassMap is a map from the speaker name to their CSS class\r\n *\r\n * Schema for responses:\r\n * {\r\n *      name: string,\r\n *      text: string\r\n * }\r\n *\r\n * convo is a list of responses\r\n * */\r\n\r\nconst GroupConvo = (props) => {\r\n    const { \r\n        cssClassMap,\r\n        startOfConvo, \r\n        convos, \r\n        availableQnGetter = createAvailableQnGetter(convos.length),\r\n        endOfConvo = \"\"\r\n    } = props;\r\n    \r\n\r\n    const [askedQns, addQn] = React.useReducer(askedQnsReducer, []); //count using askedQns.length, compare with max\r\n\r\n    const availableQns = availableQnGetter(askedQns);\r\n\r\n    const createButtonHandler = (qnIndex) => () => {\r\n        addQn(qnIndex);\r\n    }\r\n    \r\n    const ConvoToJsx = (convo) => {\r\n        return convo.map(({name, text}, i) => (\r\n            <div key={i} className={clsx('other-speech', cssClassMap[name])}>\r\n                <div className=\"name\">{name}</div>\r\n                <div className=\"text\">{text}</div>\r\n            </div>\r\n        ))\r\n    }\r\n\r\n    return (<div className=\"dialogue-container\">\r\n        {startOfConvo && ConvoToJsx(startOfConvo)}\r\n        {askedQns.map((qnIndex) => (<React.Fragment key={qnIndex}>\r\n            <div className=\"self-speech\">{convos[qnIndex].q}</div>\r\n            {ConvoToJsx(convos[qnIndex].a)}\r\n        </React.Fragment>))}\r\n        <div className=\"btn-container\">\r\n            {availableQns.map((qnIndex) => <button key={qnIndex} onClick={createButtonHandler(qnIndex)}>\r\n                {convos[qnIndex].q}\r\n            </button>)}\r\n        </div>\r\n        { endOfConvo && availableQns.length === 0 && <p>{endOfConvo}</p> } \r\n    </div>)\r\n\r\n}\r\n\r\nexport default GroupConvo;\r\n","const ncoDebriefConvo = [\r\n    {\r\n        q: 'Did you manage to achieve your goals today?',\r\n        a: ['Yep! I definitely learnt more about how to plan.'],\r\n    },\r\n    {\r\n        q: \"That's good! How so?\",\r\n        a: [\"I think I learnt to become more actively involved in the planning process, such as by providing feedback to others' ideas in a constructive manner, rather than shooting down their ideas immediately.\"],\r\n    }\r\n];\r\n\r\nexport const ncoDebriefConvoFunc = (indicesAvailable) => {\r\n    if (indicesAvailable.length > 1) return [];\r\n    return [indicesAvailable.length];\r\n}\r\n\r\nexport const ncoChatClsMap = {\r\n    Michael: 'michael-speech',\r\n    Ryan: 'ryan-speech',\r\n    Mary: 'mary-speech',\r\n    Sarah: 'sarah-speech'\r\n}\r\n\r\nexport default ncoDebriefConvo;\r\n","import React from 'react';\r\n\r\nimport consts, {motivatedAskQns} from '../consts';\r\nimport Dialogue from '../convo/Dialogue';\r\nimport scroogeConvos from '../convo/scrooge';\r\nimport jonConvos from '../convo/jonathan';\r\nimport allamConvos from '../convo/allam';\r\nimport emilyConvos from '../convo/emily';\r\nimport carmenConvos from '../convo/carmen';\r\nimport NodeImg from '../NodeImg';\r\nimport GroupConvo from '../convo/GrpConvo';\r\nimport {ncoChatClsMap} from '../convo/ncoDebrief';\r\n\r\nconst nodes = {\r\n    \"L1\": {\r\n        bgm: 'mii.mp3',\r\n        img: <NodeImg src=\"emergency-button.jpg\" alt=\"Emergency Button\" />,\r\n        text: (flags) => `Your committee is very excited! They would like to get started with planning immediately and are discussing all the fun activities they can do with the children at ${flags.name}. Should you intervene?`,\r\n        option: [\r\n            {\r\n                text: \"Yes\",\r\n                next: \"L101\"\r\n            },\r\n            {\r\n                text: \"No\",\r\n                next: \"P1\",\r\n                fx: (flags) => {\r\n                    flags.decisionVisibility.research = true;\r\n                    flags.decisionVisibility.ncogoal = true;\r\n                }\r\n            }]\r\n    },\r\n\r\n    \"L101\": {\r\n        bgm: 'mii.mp3',\r\n        img: <NodeImg src=\"emergency-meeting.png\" alt=\"Emergency Button\" />,\r\n        text: (flags) => (\r\n            <div>\r\n                <p>How would you like to intervene?</p>\r\n                {flags.ncogoal !== consts.ncogoals.NONE && <p className=\"informative\">[You have already set goals for the NCOs.]</p>}\r\n            </div>\r\n        ),\r\n        option: [\r\n            {\r\n                text: \"Research more\",\r\n                next: \"L2\"\r\n            },\r\n            {\r\n                text: \"Set goals\",\r\n                next: \"L20\",\r\n                condition: (flags) => flags.ncogoal === consts.ncogoals.NONE\r\n            },\r\n            {\r\n                text: \"I have completed the interventions that I want.\",\r\n                next: \"P1\",\r\n                fx: (flags) => {\r\n                    flags.decisionVisibility.research = true;\r\n                    flags.decisionVisibility.ncogoal = true;\r\n                }\r\n            }]\r\n    },\r\n\r\n    \"L2\": {\r\n        text: (flags) => (<div>\r\n            <p>What would you like to do?</p>\r\n            {flags.research.call && <p className=\"informative\">[You have already called the home.]</p>}\r\n            {flags.research.recce && <p className=\"informative\">[You have already visited the home physically.]</p>}\r\n            {flags.research.email === 1 && <p className=\"informative\">[You have already waited 1 week for a reply to your email.]</p>}\r\n            {flags.research.email === 2 && <p className=\"informative\">[Unfortunately, due to the 2 week delay, you don't have time to conduct a reccee.]</p>}\r\n        </div>),\r\n        option: [\r\n            {\r\n                text: \"Search the home on the internet\",\r\n                next: \"L3\",\r\n                fx: (flags) => { flags.research.brochure = true },\r\n            },\r\n            {\r\n                text: \"Email the home to ask questions\",\r\n                next: \"L4\",\r\n                condition: (flags) => flags.research.email === 0,\r\n                fx: (flags) => { flags.research.email = 1 },\r\n            },\r\n            {\r\n                text: \"Wait another week for a reply to the email\",\r\n                next: \"L5\",\r\n                condition: (flags) => flags.research.email === 1,\r\n                fx: (flags) => { flags.research.email = 2 }\r\n            },\r\n            {\r\n                text: \"Send a second email\",\r\n                next: \"L5\",\r\n                condition: (flags) => flags.research.email === 1,\r\n                fx: (flags) => { flags.research.email = 2 }\r\n            },\r\n            {\r\n                text: \"Call the home to ask questions\",\r\n                next: \"L8\",\r\n                condition: (flags) => !(flags.research.call || flags.research.recce),\r\n                fx: (flags) => { \r\n                    flags.research.call = true;\r\n                    flags.spokeToScrooge = true;\r\n                },\r\n            },\r\n            {\r\n                text: \"Physically visit the home for a recce\",\r\n                next: \"L13\",\r\n                fx: (flags) => { flags.research.recce = true },\r\n                condition: (flags) => flags.research.email < 2 && !flags.research.recce,\r\n            },\r\n            {\r\n                text: \"Never mind, my committee is doing good (Back)\",\r\n                next: \"L101\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L3\": {\r\n        img: (flags) => <NodeImg src={flags.name === consts.SESAME ? \"qr-sesame.png\" : \"qr-sunshine.png\"} alt=\"QR code to brochure\" />,\r\n        text: (flags) => (\r\n            <p>\r\n                You managed to find the website of the home and have found a brochure. <br/>\r\n                <a target=\"_blank\" rel=\"noreferrer\" href={\r\n                    flags.name === consts.SESAME?\r\n                        \"https://drive.google.com/file/d/1y9t6LN6cBId0RCxE4M-7f3DOcUal8K3X/view?usp=sharing\" :\r\n                        \"https://drive.google.com/file/d/1gesm8PTUZaWnSfcy_KiPKF6H4oT86KGA/view?usp=sharing\"}>\r\n                    Link to brochure\r\n                </a>\r\n            </p>),\r\n        option: [\r\n            {\r\n                text: \"Proceed on\",\r\n                next: \"L101\"\r\n            }]\r\n    },\r\n\r\n    \"L4\": {\r\n        img: <NodeImg src=\"one-week-later.jpg\" width=\"40%\" alt=\"Spongebob One Week Later\" />,\r\n        text: \"It's been one week but the home hasn't replied you yet. What do you want to do?\",\r\n        option: [\r\n            {\r\n                text: \"Continue waiting for a reply.\",\r\n                next: \"L5\",\r\n                fx: (flags) => { flags.research.email = 2 }\r\n            },\r\n            {\r\n                text: \"Send another email.\",\r\n                next: \"L5\",\r\n                fx: (flags) => { flags.research.email = 2 }\r\n            },\r\n            {\r\n                text: \"Go back to other research options.\",\r\n                next: \"L101\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L5\": {\r\n        img: (<div className=\"iframe-container\"> <iframe src=\"https://giphy.com/embed/3o6Ztke2ogPyvyhPXO\" frameBorder=\"0\" title=\"Time is ticking\" /> </div>),\r\n        text: \"It's been another week but the home still hasn't replied you. What do you want to do?\",\r\n        option: [\r\n            {\r\n                text: \"Continue waiting for a reply.\",\r\n                next: \"L6\"\r\n            },\r\n            {\r\n                text: \"Go back to other research options.\",\r\n                next: \"L101\"\r\n            }]\r\n    },\r\n\r\n    \"L6\": {\r\n        img: <NodeImg src=\"wgt.jpg\" alt=\"where got time\" />,\r\n        text: \"WHERE GOT TIME TO WAIT??\",\r\n        option: [\r\n            {\r\n                text: \"BACK\",\r\n                next: \"L5\"\r\n            }]\r\n    },\r\n\r\n    \"L8\": {\r\n        img: (<NodeImg src=\"scrooge.jpg\" alt=\"scrooge\" />),\r\n        text: \"Upon calling the home, you were able to speak to the Home Director, Mr Scrooge.\",\r\n        option: [\r\n            {\r\n                text: \"Speak to Mr Scrooge\",\r\n                next: \"L9\",\r\n                fx: (flags) => {\r\n                    flags.research.spokeToScrooge = true;\r\n                }\r\n            }]\r\n    },\r\n\r\n    \"L9\": {\r\n        img: () => nodes[\"L8\"].img,\r\n        text: (flags) => (<Dialogue \r\n            startOfConvo={`Hello, this is Ebenzer Scrooge, Home Director of ${flags.name}. My receptionist informed me that you wanted to speak to me about a visit? I'm afraid we're rather busy right now, but I can take a few quick questions.`}\r\n            speakerClass=\"scrooge-speech\"\r\n            convos={scroogeConvos}\r\n            maxQns={4}\r\n            name=\"Mr. Scrooge\"\r\n            />),\r\n        option: [\r\n            {\r\n                text: \"One last thing pleeeeeease\",\r\n                next: \"L201\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L201\": {\r\n        img: () => nodes[\"L8\"].img,\r\n        text: () => (<p><span className=\"scrooge-speech\">\"Ok fine, you can ask one more question...\"</span><br />What would you like to ask?</p>),\r\n        option: [\r\n            {\r\n                text: \"What do the kids like to do in their free time?\",\r\n                next: \"L10\",\r\n                fx: (flags) => { flags.research.freeTime = true },\r\n            },\r\n            {\r\n                text: \"What facilities are there at the home?\",\r\n                next: \"L11\"\r\n            },\r\n            {\r\n                text: \"Is there Wi-Fi at the home?\",\r\n                next: \"L12\"\r\n            }]\r\n    },\r\n\r\n    \"L10\": {\r\n        img: <NodeImg src=\"soccer.png\" alt=\"soccer\" />,\r\n        text: \"I think the kids like to play soccer.\",\r\n        option: [\r\n            {\r\n                text: \"Proceed on\",\r\n                next: \"L101\"\r\n            }]\r\n    },\r\n\r\n    \"L11\": {\r\n        img: (<NodeImg src=\"just-for-laughs.png\" alt=\"just for laugh gags\" />),\r\n        text: \"We have a TV, a phone and a kitchen. Nothing really interesting plays on TV though... it's usually Just for Laugh Gags.\",\r\n        option: [\r\n            {\r\n                text: \"Proceed on\",\r\n                next: \"L101\"\r\n            }]\r\n    },\r\n\r\n    \"L12\": {\r\n        text: \"There is no Wi-Fi at the home.\",\r\n        option: [\r\n            {\r\n                text: \"Proceed on\",\r\n                next: \"L101\"\r\n            }]\r\n    },\r\n\r\n    \"L13\": {\r\n        bgm: 'forlorn-child.mp3',\r\n        text: (flags) => ( \r\n            <React.Fragment>\r\n                <p>Your teacher has brought you to {flags.name}. She informs you that unfortunately, you only have time to ask each person a few questions. You can speak to any of the children or the Home Director. Who would you like to speak to?</p>\r\n                {flags.ncogoal === consts.ncogoals.LEARN_STORIES_BEF_RESEARCH && <p className=\"informative\">[Your committee is extra motivated to learn the stories of the residents. You can ask each person 1 additional question.]</p>}\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Speak to Home Director, Mr Scrooge\",\r\n                next: \"L14\",\r\n                fx: (flags) => {\r\n                    flags.research.spokeToScrooge = true;\r\n                }\r\n            },\r\n            {\r\n                text: \"Speak to 16 year old Jonathan\",\r\n                next: \"L15\",\r\n                fx: (flags) => { flags.research.spokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 14 year old Allam\",\r\n                next: \"L16\",\r\n                fx: (flags) => { flags.research.spokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 10 year old Emily\",\r\n                next: \"L17\",\r\n                fx: (flags) => { flags.research.spokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 9 year old Carmen\",\r\n                next: \"L18\",\r\n                fx: (flags) => { flags.research.spokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"I'm done, let's proceed on\",\r\n                next: \"L101\"\r\n            }]\r\n    },\r\n\r\n    \"L14\": {\r\n        img: (flags) => nodes[\"L8\"].img,\r\n        text: (flags) => (<Dialogue\r\n            startOfConvo={`Welcome to ${flags.name}! I am Ebenzer Scrooge, the Home Director. Feel free to ask me anything about the home!`}\r\n            speakerClass=\"scrooge-speech\"\r\n            convos={scroogeConvos}\r\n            maxQns={motivatedAskQns.includes(flags.ncogoal) ? 5 : 4}\r\n            name=\"Mr. Scrooge\" />) ,\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"L13\"\r\n            }]\r\n    },\r\n\r\n    \"L15\": {\r\n        text: (flags) => (<Dialogue \r\n            startOfConvo=\"Hi... I'm Jonathan, and I'm 16 years old.\"\r\n            speakerClass=\"jon-speech\"\r\n            convos={jonConvos}\r\n            name=\"Jonathan\"\r\n            maxQns={motivatedAskQns.includes(flags.ncogoal) ? 3 : 2}\r\n            />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"L13\"\r\n            }]\r\n    },\r\n\r\n    \"L16\": {\r\n        text: (flags) => (<Dialogue \r\n            startOfConvo=\"Sup. I'm Allam, and I'm 14.\"\r\n            speakerClass=\"allam-speech\"\r\n            convos={allamConvos}\r\n            name=\"Allam\"\r\n            maxQns={motivatedAskQns.includes(flags.ncogoal) ? 3 : 2}\r\n            />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"L13\"\r\n            }]\r\n    },\r\n\r\n    \"L17\": {\r\n        text: (flags) => (<Dialogue \r\n            startOfConvo=\"Umm... hello! I'm Emily!\"\r\n            speakerClass=\"emily-speech\"\r\n            convos={emilyConvos}\r\n            name=\"Emily\"\r\n            maxQns={motivatedAskQns.includes(flags.ncogoal) ? 3 : 2}\r\n            />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"L13\"\r\n            }]\r\n    },\r\n\r\n    \"L18\": {\r\n        text: (flags) => (<Dialogue \r\n            startOfConvo=\"I'm Carmen...\"\r\n            speakerClass=\"carmen-speech\"\r\n            convos={carmenConvos}\r\n            name=\"Carmen\"\r\n            maxQns={motivatedAskQns.includes(flags.ncogoal) ? 3 : 2}\r\n            />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"L13\"\r\n            }]\r\n    },\r\n\r\n    \"L20\": {\r\n        img: (<NodeImg ext=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/twitter/259/thinking-face_1f914.png\" alt=\"Thinking emoji\"/>),\r\n        text: \"How do you want to set goals with your committee?\",\r\n        option: [\r\n            {\r\n                text: \"Tell your committee what goals they should try to achieve.\",\r\n                next: \"L21\",\r\n            },\r\n            {\r\n                text: \"Facilitate your committee in setting their own goals for the VIA.\",\r\n                next: \"L22\"\r\n            }]\r\n    },\r\n\r\n    \"L21\": {\r\n        bgm: 'kahoot.mp3',\r\n        text: \"What goal do you wish to set for your committee?\",\r\n        option: [\r\n            {\r\n                text: \"We should learn more about the stories of the residents\",\r\n                next: (flags) => flags.research.recce ? \"L302\" : \"L301\",\r\n            },\r\n            {\r\n                text: \"We should try to solve the problems of the residents\",\r\n                condition: (flags) => flags.ncogoal !== consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH,\r\n                next: (flags) => (flags.research.brochure || flags.research.spokeToScrooge) ? \"L304\" : \"L303\",\r\n            },\r\n            {\r\n                text: \"We should put in our best to plan exciting activities\",\r\n                next: \"L306\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L301\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>You tell the committee that they should learn more about the stories of the residents.</p>\r\n            <GroupConvo \r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Michael\", text: \"I dont quite like it. I dont feel like I will be learning anything to improve myself.\" },\r\n                        { name: \"Ryan\", text: \"Hey, well still be learning something, right?\" },\r\n                        { name: \"Sarah\", text: \"Lets work harder for our research. Shall we give it a try?\" }\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p className=\"informative\">[Your committee is now extra motivated when talking to the people from {flags.name}. You can ask each person 1 additional question whenever you talk to them.]</p>\r\n        </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Continue\",\r\n                next: \"L101\",\r\n                fx: (flags) => flags.ncogoal = consts.ncogoals.LEARN_STORIES_BEF_RESEARCH,\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L302\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>You tell the committee that they should learn more about the stories of the residents.</p>\r\n            <GroupConvo \r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Michael\", text: \"I dont quite like it. I dont feel like I will be learning anything to improve myself.\" },\r\n                        { name: \"Ryan\", text: \"Hey, well still be learning something. We can try to learn more about the residents by talking to them during the VIA.\" },\r\n                        { name: \"Sarah\", text: \"Sigh only if we had set our goals before visiting the home.\" }\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p className=\"informative\">[Your committee is now motivated when talking to the people from {flags.name}. You can ask each person 1 additional question if you chit-chat with them during the VIA.]</p>\r\n        </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Continue\",\r\n                next: \"L101\",\r\n                fx: (flags) => flags.ncogoal = consts.ncogoals.LEARN_STORIES_AFT_RESEARCH,\r\n            }\r\n        ]\r\n\r\n    },\r\n\r\n    \"L303\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>You tell the committee that they should try to solve the problems of the residents.</p>\r\n            <GroupConvo \r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Michael\", text: \"I dont quite like it. I dont feel like I will be learning anything to improve myself.\" },\r\n                        { name: \"Ryan\", text: \"Hey, well still be learning something, right?\" },\r\n                        { name: \"Sarah\", text: \"What if we are unable to solve the problems of the residents? We dont even know what they need.\" },\r\n                        { name: \"Mary\", text: \"Lets work harder for our research to find out what the residents need. Shall we give it a try?\" },\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p className=\"informative\">[Your committee is now motivated when researching {flags.name} for the VIA. You can ask each person 1 additional question whenever talking to someone from the home <em>before</em> the VIA.]</p>\r\n        </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Continue\",\r\n                next: \"L101\",\r\n                fx: (flags) => flags.ncogoal = consts.ncogoals.SOLVE_PROBLEMS_BEF_RESEARCH\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L304\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>You tell the committee that they should try to solve the problems of the residents.</p>\r\n            <GroupConvo \r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Michael\", text: \"Hmm... we learnt from our research that the home needs more money. So should we do a fundraising campaign?\" },\r\n                        { name: \"Mary\", text: \"Isnt there not enough time to get a fundraising campaign approved?\" },\r\n                        { name: \"Ryan\", text: `Thats probably right, considering that the VIA is in ${4 - flags.research.email} weeks time` },\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>How do you respond?</p>\r\n        </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Sorry for my oversight. Let's set another goal.\",\r\n                next: \"L21\",\r\n                fx: (flags) => flags.ncogoal = consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH\r\n            },\r\n            {\r\n                text: \"Thats not the spirit. We must try our best to solve other problems.\",\r\n                next: \"L305\",\r\n                fx: (flags) => flags.ncogoal = consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"L305\": {\r\n        text: \"Your committee members look blankly at one another, visibly confused. They do not seem very inspired, but shrug in acceptance of your decision.\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"L101\"\r\n        }]\r\n    },\r\n\r\n    \"L306\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>You tell the committee that they should put in their best to plan exciting activities for the children at {flags.name}.</p>\r\n            <GroupConvo \r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Michael\", text: \"This sounds like a good idea! I have so many exciting activities in mind.\" },\r\n                        { name: \"Ryan\", text: \"I cant wait to get started!\" },\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p className=\"informative\">[You have unlocked more exciting activities to pick from later.]</p>\r\n            <p className=\"informative\">[Your committee will not propose any \"boring\" activities.]</p>\r\n        </React.Fragment>),\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"L101\",\r\n            fx: (flags) => {\r\n                flags.ncogoal = consts.ncogoals.EXCITING_ACTIVITIES;\r\n            }\r\n        }],\r\n    },\r\n\r\n    \"L22\": {\r\n        bgm: 'kahoot.mp3',\r\n        text: () => (<React.Fragment>\r\n            <p>\r\n                You asked your committee to share their goals with you. This is what one of them, Michael, told you.\r\n            </p>\r\n            <Dialogue\r\n                startOfConvo=\"My goal is to learn how to plan.\"\r\n                speakerClass=\"michael-speech dialogue\"\r\n                convos={[]}\r\n                name=\"Michael\"\r\n                maxQns={null}\r\n            />\r\n            <p>What do you think?</p>\r\n        </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"I'm okay with it.\",\r\n                next: \"L101\",\r\n                fx: (flags) => { \r\n                    flags.ncogoal = consts.ncogoals.NOT_SPECIFIC;\r\n                    flags.decisionVisibility.ncogoal = true;\r\n                }\r\n            },\r\n            {\r\n                text: \"I don't like it.\",\r\n                next: \"L23\",\r\n                fx: (flags) => flags.ncogoal = consts.ncogoals.NCO\r\n            },\r\n        ]\r\n    },\r\n\r\n    \"L23\": {\r\n        text: \"What do you want to tell Michael?\",\r\n        option: [\r\n            {\r\n                text: \"This is not specific enough. You need to set another goal.\",\r\n                next: \"L24\"\r\n            },\r\n            {\r\n                text: \"That's a good start. Let's try to use 3W1H to make this goal more specific!\",\r\n                next: \"L25\"\r\n            }]\r\n    },\r\n\r\n    \"L24\": {\r\n        img: <NodeImg src=\"pepecry.png\" />,\r\n        text: \"Michael looks a bit sad. He sets another goal, to learn how to take calculated risks while planning. You are happy with this goal.\",\r\n        option: [\r\n            {\r\n                text: \"Proceed on\",\r\n                next: \"L101\",\r\n                fx: (flags) => {\r\n                    flags.decisionVisibility.ncogoal = true;\r\n                }\r\n            }]\r\n    },\r\n\r\n    \"L25\": {\r\n        text: \"Michael thinks about it and enthusiastically responds that by the end of the VIA, he wants to learn how to appropriately delegate manpower based on need.\",\r\n        option: [\r\n            {\r\n                text: \"Sounds great!\",\r\n                next: \"L101\",\r\n                fx: (flags) => {\r\n                    flags.decisionVisibility.ncogoal = true;\r\n                }\r\n            }]\r\n    },\r\n}\r\n\r\nexport default nodes;\r\n","import React from 'react';\r\nimport consts from '../consts';\r\nimport Dialogue from '../convo/Dialogue';\r\nimport {doP15Check, doP5Check, doP9Check} from '../events';\r\nimport NodeImg from '../NodeImg';\r\n\r\nconst planArcNodes = {\r\n    \"P1\": {\r\n        img: <NodeImg src=\"plan.jpg\" alt=\"\" />,\r\n        bgm: 'chariots-of-fire.mp3',\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Time to get some planning done - here are some activities that your Sec 2s proposed! Pick one to conduct.</p>\r\n            {(flags.research.brochure || flags.research.freeTime || flags.research.soccer) && <p className=\"informative\">[You have unlocked additional options because of your research.]</p>}\r\n            {(flags.research.recce) && <p className=\"informative\">[You have unlocked additional options because of your physical recce to the home.]</p>}\r\n            {(flags.ncogoal === consts.ncogoals.EXCITING_ACTIVITIES) && <p className=\"informative\">[You have unlocked additional options because you told your committee members to think of exciting activities. The more boring options have been excluded.]</p>}\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Among Us!\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.activities.AMONG_US },\r\n            },\r\n            {\r\n                text: \"Sing Songs\",\r\n                next: \"P4\"\r\n            },\r\n            {\r\n                text: \"Book Reading\",\r\n                next: \"P2\",\r\n                condition: (flags) => flags.ncogoal !== consts.ncogoals.EXCITING_ACTIVITIES,\r\n            },\r\n            {\r\n                text: \"Play soccer\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.activities.SOCCER },\r\n                condition: (flags) => flags.research.brochure || flags.research.freeTime || flags.research.soccer || flags.research.recce\r\n            },\r\n            {\r\n                text: \"Chit Chat\",\r\n                next: \"P3\",\r\n                condition: (flags) => flags.ncogoal !== consts.ncogoals.EXCITING_ACTIVITIES,\r\n                fx: (flags) => { flags.activity = consts.activities.CHIT_CHAT }\r\n            },\r\n            {\r\n                text: \"Bring PS5 and Switch to play games\",\r\n                next: \"P6\"\r\n            },\r\n            {\r\n                text: \"Kite Fighting\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.activities.KITE },\r\n                condition: (flags) => flags.research.recce,\r\n            },\r\n            {\r\n                text: \"Waveboarding\",\r\n                next: \"P30\",\r\n                condition: (flags) => flags.ncogoal === consts.ncogoals.EXCITING_ACTIVITIES,\r\n            },\r\n            {\r\n                text: \"Muay Thai\",\r\n                next: \"P31\",\r\n                condition: (flags) => flags.ncogoal === consts.ncogoals.EXCITING_ACTIVITIES,\r\n            },\r\n        ]\r\n    },\r\n\r\n    \"P30\": {\r\n        img: <NodeImg src=\"rip-on-gravestone.jpg\" alt=\"RIP\"/>,\r\n        text: \"Your teachers have feedbacked that waveboarding is too unsafe for the VIA. Looks like you have to pick another activity...\",\r\n        option: [\r\n            {\r\n                text: \"Oh well...\",\r\n                next: \"P1\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P31\": {\r\n        img: <NodeImg src=\"rip-on-gravestone.jpg\" alt=\"RIP\"/>,\r\n        text: \"Your teachers have feedbacked that Muay Thai is too unsafe for the VIA. Looks like you have to pick another activity...\",\r\n        option: [\r\n            {\r\n                text: \"Oh well...\",\r\n                next: \"P1\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P2\": {\r\n        img: () => (<div className=\"book-catalogue\">\r\n            <NodeImg src=\"snow-white.jpg\" alt=\"Snow White\"/>\r\n            <NodeImg src=\"three-little-pigs.jpg\" alt=\"Three Little Pigs\"/>\r\n            <NodeImg src=\"geronimo-stilton.jpg\" alt=\"Geronimo Stilton\"/>\r\n            <NodeImg src=\"enid-blyton.jpg\" alt=\"Enid Blyton\"/>\r\n            <NodeImg src=\"harry-potter.jpg\" alt=\"Harry Potter\"/>\r\n            <NodeImg src=\"percy-jackson.jpg\" alt=\"Percy Jackson\"/>\r\n            <NodeImg src=\"hard-truths.jpg\" alt=\"Hard Truths\"/>\r\n            </div>),\r\n        text: \"What books should we bring? We have time for two books:\",\r\n        option: [\r\n            {\r\n                text: \"Snow White + Three Little Pigs\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.books.SNOW_WHITE }\r\n            },\r\n            {\r\n                text: \"Geronimo Stilton + Enid Blyton\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.books.GERONIMO }\r\n            },\r\n            {\r\n                text: \"Harry Potter + Percy Jackson\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.books.HARRY_POTTER }\r\n            },\r\n            {\r\n                text: \"Hard Truths to Keep Singapore Going (this book is thick enough on its own)\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.books.HARD_TRUTHS }\r\n            },\r\n            {\r\n                text: \"I don't like any of these choices (Back)\",\r\n                next: \"P1\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P4\": {\r\n        img: <NodeImg src=\"singing.png\" alt=\"\" />,\r\n        text: \"Your Sec 2s wonder what type of songs to sing. What will you suggest?\",\r\n        option: [\r\n            {\r\n                text: \"K-pop\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.songs.K_POP }\r\n            },\r\n            {\r\n                text: \"National Day songs\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.songs.NDP }\r\n            },\r\n            {\r\n                text: \"School Song + Red Cross Song\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.songs.SCHOOL_SONG }\r\n            },\r\n            {\r\n                text: \"English Rap\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.songs.RAP }\r\n            },\r\n            {\r\n                text: \"Songs from the 80s\",\r\n                next: \"P3\",\r\n                fx: (flags) => { flags.activity = consts.songs.OLD }\r\n            },\r\n            {\r\n                text: \"I don't like any of these choices (Back)\",\r\n                next: \"P1\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P3\": {\r\n        text: \"How many sessions should the unit go?\",\r\n        option: [\r\n            {\r\n                text: \"1x6h visit\",\r\n                next: doP5Check,\r\n                fx: (flags) => { flags.sessions = consts.sessions.ONE }\r\n            },\r\n            {\r\n                text: \"2x3h visits in the same month\",\r\n                next: doP5Check,\r\n                fx: (flags) => { flags.sessions = consts.sessions.TWO_TGT }\r\n            },\r\n            {\r\n                text: \"2x3h visits, one in March, one in June\",\r\n                next: doP5Check,\r\n                fx: (flags) => { flags.sessions = consts.sessions.TWO_SPREAD }\r\n            },\r\n            {\r\n                text: \"4x2h visits, one in each term\",\r\n                next: doP5Check,\r\n                fx: (flags) => { flags.sessions = consts.sessions.FOUR }\r\n            },\r\n            {\r\n                text: \"0x8h visit\",\r\n                next: \"P7\"\r\n            }]\r\n    },\r\n\r\n    \"P4.5\": {\r\n        text: \"Your committee is asking you to treat them to ice cream after the whole project is over. How would you like to respond to them?\",\r\n        option: [\r\n            {\r\n                text: \"Of course!\",\r\n                next: \"P5\",\r\n            },\r\n            {\r\n                text: \"Sure, we can have ice cream, but I'm not paying...\",\r\n                next: \"P5\",\r\n            },\r\n            {\r\n                text: \"I'm lactose intolerant\",\r\n                next: \"P5\"\r\n            },\r\n            {\r\n                text: \"Nah.\",\r\n                next: \"P5\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P6\": {\r\n        img: <NodeImg ext=\"https://i.kym-cdn.com/photos/images/original/001/861/224/330.jpg\" alt=\"ps5 duck\" />,\r\n        text: \"That's neat, but you don't have enough budget to buy those things (Besides, it's already a miracle if you even manage to find these in stock)\",\r\n        option: [\r\n            {\r\n                text: \"Aww (choose something else)\",\r\n                next: \"P1\"\r\n            }]\r\n    },\r\n\r\n    \"P7\": {\r\n        img: <NodeImg ext=\"https://i.kym-cdn.com/photos/images/original/001/779/895/752.jpg\" alt=\"not stonks\" />,\r\n        text: \"Haha very funny - by not having the VIA, your unit's EUA dropped :( Your unit is very sad.\",\r\n        option: [\r\n            {\r\n                text: \"Let's not do that (choose something else)\",\r\n                next: \"P3\"\r\n            }]\r\n    },\r\n    \r\n    \"P5\": {\r\n        img: <NodeImg src=\"time-flies.jpg\" alt=\"Time flies\" />,\r\n        text: \"The committee is spending a lot of time on setting roles and goals. Should you intervene?\",\r\n        option: [\r\n            {\r\n                text: \"Nah, they are doing fine.\",\r\n                next: (flags) => doP9Check(flags, \"P10\"),\r\n                fx: (flags) => flags.decisionVisibility.rolesandgoals = true,\r\n            },\r\n            {\r\n                text: \"Yes\",\r\n                next: \"P8\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P8\": {\r\n        img: () => planArcNodes[\"P5\"].img,\r\n        text: \"What will you do?\",\r\n        option: [\r\n            {\r\n                text: \"Tell everyone to stop wasting time and instead focus on making the activity as exciting as possible\",\r\n                next: \"P11\"\r\n            },\r\n            {\r\n                text: \"Tell everyone to just reuse the roles and goals from the last home visit's proposal.\",\r\n                next: \"P11\"\r\n            },\r\n            {\r\n                text: \"Tell the Admin IC and 2ICs to set for the rest of the committee\",\r\n                next: (flags) => doP9Check(flags, \"P14\"),\r\n                fx: (flags) => flags.decisionVisibility.rolesandgoals = true,\r\n            },\r\n            {\r\n                text: \"Actually, none of these (Let them continue discussing)\",\r\n                next: (flags) => doP9Check(flags, \"P10\"),\r\n                fx: (flags) => flags.decisionVisibility.rolesandgoals = true,\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P11\": {\r\n        img: <NodeImg ext=\"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/twitter/259/thinking-face_1f914.png\" alt=\"Thinking emoji\"/>,\r\n        text: \"Well that got everyone to move on, but they don't seen too happy about it...\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"P12\",\r\n        }]\r\n    },\r\n    \r\n    \"P12\": {\r\n        img: (<div className=\"iframe-container\"><iframe src=\"https://giphy.com/embed/XoM1eSwGMXK4huqV2E\" frameBorder=\"0\" class=\"giphy-embed\" allowFullScreen title=\"capoo sleeping\" /></div>),\r\n        text: \"You realise that the rest of the committee is slacking off. What will you do?\",\r\n        option: [\r\n            {\r\n                text: \"Assemble them and scold them\",\r\n                next: (flags) => doP9Check(flags, \"P14\"),\r\n                fx: (flags) => { flags.rolesandgoals = consts.rolesandgoals.SCOLD }\r\n            },\r\n            {\r\n                text: \"Tell them off to the YO, this is out of your hands!\",\r\n                next: (flags) => doP9Check(flags, \"P14\"),\r\n                fx: (flags) => { flags.rolesandgoals = consts.rolesandgoals.YO_SCOLD }\r\n            },\r\n            {\r\n                text: \"Just tank the project.\",\r\n                next: (flags) => doP9Check(flags, \"P14\"),\r\n                fx: (flags) => { flags.rolesandgoals = consts.rolesandgoals.OIC }\r\n            },\r\n            {\r\n                text: \"Ask the rest of the committee: What's going on?\",\r\n                next: \"P13\",\r\n                fx: (flags) => { flags.rolesandgoals = consts.rolesandgoals.CHECK_ON_THEM }\r\n            }\r\n        ]\r\n    },\r\n    \r\n    \"P13\": {\r\n        text: () => (<React.Fragment><Dialogue\r\n            startOfConvo=\"Our jobs aren't really what we want to do or what we thought they would be like...\"\r\n            speakerClass=\"nco-speech\"\r\n            convos={[]}\r\n            name=\"the committee\"\r\n            maxQns={null}\r\n        />\r\n            <p>How do you want to respond to them?</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Well, RnRs are always set like this and have worked previous years, so let's better just stick to it.\",\r\n                next: \"P14\",\r\n                fx: (flags) => { flags.rolesandgoals =  consts.rolesandgoals.TRADITION }\r\n            },\r\n            {\r\n                text: \"Oh if you really want, feel free to swap roles...\",\r\n                next: (flags) => doP9Check(flags, \"P10\"),\r\n                fx: (flags) => flags.decisionVisibility.rolesandgoals = true,\r\n            },\r\n            {\r\n                text: \"Ok let's go back to setting your own roles and goals\",\r\n                next: (flags) => doP9Check(flags, \"P10\"),\r\n                fx: (flags) => flags.decisionVisibility.rolesandgoals = true,\r\n            }\r\n        ]\r\n    },\r\n    \r\n    \"P9\": {\r\n        text: \"One of your Sec 2s ask: What margin width should we use for our proposal?\",\r\n        option: [\r\n            {\r\n                text: \"Default, of course\",\r\n                next: \"P10\"\r\n            },\r\n            {\r\n                text: \"Narrow to save some trees\",\r\n                next: \"P10\"\r\n            },\r\n            {\r\n                text: \"Exactly 0.75\\\" just because\",\r\n                next: \"P10\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P9.5\": {\r\n        text: \"One of your Sec 2s ask you whether they can be reimbursed for the printing of our proposals? They have the receipts from the photocopy shop. How do you want to respond?\",\r\n        option: [\r\n            {\r\n                text: \"Yes. Submit the receipts to the YOs.\",\r\n                next: \"P10\",\r\n            },\r\n            {\r\n                text: \"Yes. I will reimburse you first and help you claim from the YOs later.\",\r\n                next: \"P9.75\",\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P9.75\": {\r\n        text: \"After reimbursing the Sec 2s, you are $5 poorer... (for now)\",\r\n        option: [\r\n            {\r\n                text: \"Oh well...\",\r\n                next: \"P10\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P10\": {\r\n        text: (flags) => (\r\n            <p>Alright! Your committee has created a beautiful proposal, with a week to spare! {flags.ncogoal === consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH ? \"With the exception of the fundraising component, which your teacher rejected as there wasn't enough time, the rest of your proposal was approved.\" : \"Your teacher approved the proposal too!\"} All seems to be going well.</p>\r\n            ),\r\n        option: [{\r\n            text: \"Nice ^__^\",\r\n            next: doP15Check\r\n        }]\r\n    },\r\n\r\n    \"P14\": {\r\n        text: (flags) => (<p>Your committee finally finished the proposal two nights before the VIA. {flags.ncogoal === consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH && \"You had to scrap the fundraising component of the VIA as there wasn't enough time.\"} It's not the best, but at least it's before the VIA, let's hope the teachers find this OK... </p>),\r\n        option: [{\r\n            text: \"Fingers crossed...\",\r\n            next: doP15Check\r\n        }]\r\n    },\r\n\r\n    \"P15\": {\r\n        text: \"Which teacher would you like to ask to bring the unit to the VIA?\", option: [\r\n            {\r\n                text: \"Mrs Ree\",\r\n                next: \"P16\"\r\n            },\r\n            {\r\n                text: \"Mr Shah\",\r\n                next: \"P17\"\r\n            },\r\n            {\r\n                text: \"Mdm Ani\",\r\n                next: \"P18\",\r\n            },\r\n            {\r\n                text: \"All 3!\",\r\n                next: \"P19\",\r\n            },\r\n            {\r\n                text: \"Check with the teachers who they have decided on\",\r\n                next: \"P19\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"P16\": {\r\n        text: \"Mdm Ree says she is going on maternity leave. Mr Shah will be bringing the unit to the VIA instead\",\r\n        option: [{\r\n            text: \"Alright!\",\r\n            next: \"A1\"\r\n        }]\r\n    },\r\n\r\n    \"P17\": {\r\n        text: \"Mr Shah agrees to join the unit for the VIA.\",\r\n        option: [{\r\n            text: \"Hooray!\",\r\n            next: \"A1\"\r\n        }]\r\n    },\r\n\r\n    \"P18\": {\r\n        text: \"Mdm Ani says she has an important meeting on the day of the VIA. Mr Shah will be bringing the unit to the unit instead.\",\r\n        option: [{\r\n            text: \"Okay!\",\r\n            next: \"A1\"\r\n        }]\r\n    },\r\n\r\n    \"P19\": {\r\n        text: \"The teachers tell you that only Mr Shah will be going with the unit for the VIA as the other two are unavailable.\",\r\n        option: [{\r\n            text: \"Noted\",\r\n            next: \"A1\"\r\n        }]\r\n    },\r\n}\r\n\r\nexport default planArcNodes;\r\n","export const cadetChatClsMap = {\r\n    Roy: \"roy-speech\", //cyan\r\n    Liz: \"liz-speech\", //lavendar\r\n    Jack: \"jack-speech\" //lime\r\n}","import React from 'react'\r\nimport consts from '../consts'\r\nimport Dialogue from '../convo/Dialogue'\r\nimport ncoDebriefConvo, {ncoDebriefConvoFunc} from '../convo/ncoDebrief'\r\nimport vagueCadetDebriefConvos from '../convo/vagueCadetDebrief'\r\nimport NodeImg from '../NodeImg'\r\nimport GroupConvo from '../convo/GrpConvo';\r\nimport {cadetChatClsMap} from '../convo/cadetDebrief'; \r\nimport {ncoChatClsMap} from '../convo/ncoDebrief';\r\n\r\nconst reflectArcNodes = {\r\n\r\n    \"R1\": {\r\n        bgm: 'watashi-no-uso.mp3',\r\n        text: \"The VIA has ended and you are waiting for the bus to arrive. What do you want to do?\",\r\n        option: [\r\n            {\r\n                text: \"Conduct FA(S) training refresher for next week's accreds\",\r\n                next: \"R1.5\",\r\n            },\r\n            {\r\n                text: \"Play Among Us with your cadets\",\r\n                next: \"R1.5\"\r\n            },\r\n            {\r\n                text: \"Just chit-chat with your cadets\",\r\n                next: \"R1.5\"\r\n            },\r\n            {\r\n                text: \"Conduct a debrief session with your committee first\",\r\n                next: \"R1.5\",\r\n                fx: (flags) => { \r\n                    flags.debrief = consts.debrief.NCO;\r\n                }\r\n            },\r\n            {\r\n                text: \"Conduct a debrief session with the cadets first\",\r\n                next: \"R1.5\",\r\n                fx: (flags) => {\r\n                    flags.debrief = consts.debrief.CADET;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"R1.5\": {\r\n        text: \"Are you sure about that? The bus is coming really soon and you only have time for one thing...\",\r\n        option: [\r\n            {\r\n                text: \"Yes\",\r\n                next: (flags) => {\r\n                    switch (flags.debrief) {\r\n                        case consts.debrief.NCO:\r\n                            return \"R5\";\r\n                        case consts.debrief.CADET: \r\n                            return \"R6\";\r\n                        default:\r\n                            return \"R2\";\r\n                    }\r\n                },\r\n            },\r\n            {\r\n                text: \"Let me choose something else (back)\",\r\n                next: \"R1\",\r\n                fx: (flags) => { \r\n                    flags.debrief = \"\";\r\n                }\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"R2\": {\r\n        text: \"You carry on with that until the bus comes.\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"R4\"\r\n        }]\r\n    },\r\n\r\n    \"R3\": {\r\n        bgm: 'only-time.mp3',\r\n        img: (<NodeImg src=\"sunset.jpg\" />),\r\n        text: \"The cadets were immediately dismissed when you reached school. No debrief means no reflection forms for SL badges means one angry YO >:(\",\r\n        option: [{\r\n            text: \"Oh well...\",\r\n            next: \"END\",\r\n            fx: (flags) => flags.decisionVisibility.debrief = true,\r\n        }]\r\n    },\r\n\r\n    \"R4\": {\r\n        text: \"The bus is here to take the cadets back!\",\r\n        option: [\r\n            {\r\n                text: \"Guess we are done today!\",\r\n                next: \"END\",\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            },\r\n            {\r\n                text: \"We can still debrief the cadets back in school\",\r\n                next: \"R3\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO,\r\n                fx: (flags) => { flags.noTimeToDebriefCadets = true },\r\n            },\r\n            {\r\n                text: \"We can still debrief the committee members back in school after dismissal\",\r\n                next: \"R5\",\r\n                condition: (flags) => flags.debrief === consts.debrief.CADET,\r\n                fx: (flags) => flags.debrief = consts.debrief.BOTH\r\n            }]\r\n    },\r\n\r\n    \"R5\": {\r\n        text: \"You are about to conduct a debrief with your committee members.\",\r\n        option: [{\r\n            text: \"Proceed\",\r\n            next: (flags) => {\r\n                if (flags.ncogoal === consts.ncogoals.NONE) {\r\n                    return \"R7\" //no routing change\r\n                } else if (flags.ncogoal === consts.ncogoals.LEARN_STORIES_BEF_RESEARCH) {\r\n                    if (flags.research.spokeToResidents || flags.finalSpokeToResidents) {\r\n                        return \"R101\"\r\n                    } else {\r\n                        return \"R102\"\r\n                    }\r\n                } else if (flags.ncogoal === consts.ncogoals.LEARN_STORIES_AFT_RESEARCH) {\r\n                    if (flags.finalSpokeToResidents) {\r\n                        return \"R103\"\r\n                    } else {\r\n                        return \"R104\"\r\n                    }\r\n                } else if (flags.ncogoal === consts.ncogoals.SOLVE_PROBLEMS_BEF_RESEARCH) {\r\n                    if (flags.finalSpokeToScrooge) {\r\n                        return \"R105\"\r\n                    } else {\r\n                        return \"R106\"\r\n                    }\r\n                } else if (flags.ncogoal === consts.ncogoals.SOLVE_PROBLEMS_AFT_RESEARCH) {\r\n                    return \"R107\"\r\n                } else if (flags.ncogoal === consts.ncogoals.EXCITING_ACTIVITIES) {\r\n                    return \"R108\"\r\n                } else if (flags.ncogoal === consts.ncogoals.NOT_SPECIFIC) {\r\n                    return \"R9\" //no routing change\r\n                } else if (flags.ncogoal === consts.ncogoals.NCO) {\r\n                    return \"R10\" //no routing change\r\n                }\r\n            }\r\n        }]\r\n    },\r\n\r\n    \"R6\": {\r\n        text: \"Your are about to conduct a debrief with your cadets\",\r\n        option: [{\r\n            text: \"Proceed\",\r\n            next: (flags) => {\r\n                if (flags.cadetgoal === consts.cadetgoal.NONE) {\r\n                    return \"R12\"\r\n                } else if (flags.cadetgoal === consts.cadetgoal.NCO) {\r\n                    return \"R13\"\r\n                } else if (flags.cadetgoal === consts.cadetgoal.GOOD) {\r\n                    return \"R15\"\r\n                } else if (flags.cadetgoal === consts.cadetgoal.BAD) {\r\n                    return \"R14\"\r\n                }\r\n            }\r\n        }]\r\n    },\r\n\r\n    \"R7\": {\r\n        img: (<NodeImg ext=\"https://i.kym-cdn.com/entries/icons/original/000/018/489/nick-young-confused-face-300x256-nqlyaa.jpg\" />), \r\n        text: () => (<React.Fragment>\r\n            <p>Your committee members are very confused about what they need to debrief about... What are goals? {\"\\u53EF\\u4EE5\\u5403\\u7684\\u5417?\"} (translator note: can this be eaten?)</p>\r\n            <p className=\"informative\">[You did not set goals with your committee.]</p>\r\n        </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R101\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We have put in out best and have learnt more about the stories of the residents.\"},\r\n                    {name: \"Ryan\", text: \"Anyway, why is there a need to even learn about the stories of the beneficiaries?\"},\r\n                    {name: \"Sarah\", text: `We would already have passed out when Chai Chee RCY next visits ${flags.name}${flags.sessions === consts.sessions.ONE ? `, even if we choose to visit them again` : \"\"}, so our learning is of no use.`},\r\n                    {name: \"Michael\", text: \"Well, hopefully it is of some use to our juniors...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA wasn't very meaningful for your committee members on a personal level... Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R102\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We did not learn much about the stories of the residents. We didn't know what to ask so we didn't ask them much.\"},\r\n                    {name: \"Ryan\", text: \"Anyway, why is there a need to even learn about the stories of the beneficiaries?\"},\r\n                    {name: \"Sarah\", text: `We would already have passed out when Chai Chee RCY next visits ${flags.name}${flags.sessions === consts.sessions.ONE ? `, even if we choose to visit them again` : \"\"}, so our learning is of no use.`},\r\n                    {name: \"Michael\", text: \"Well, hopefully it is of some use to our juniors...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA wasn't very meaningful for your committee members.. Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R103\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We have put in out best and have learnt more about the stories of the residents.\"},\r\n                    {name: \"Ryan\", text: \"It would have been better if we had set our goals before doing out research. We might have been able to ask the right questions during our research. This way, perhaps we could have learnt even more when talking to the residents during the VIA!\"},\r\n                    {name: \"Sarah\", text: \"Anyway, why is there a need to even learn about the stories of the beneficiaries?\"},\r\n                    {name: \"Mary\", text: `We would already have passed out when Chai Chee RCY next visits ${flags.name}${flags.sessions === consts.sessions.ONE ? `, even if we choose to visit them again` : \"\"}, so our learning is of no use.`},\r\n                    {name: \"Michael\", text: \"Well, hopefully it is of some use to our juniors...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA wasn't very meaningful for your committee members... Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n\r\n    \"R104\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We did not learn much about the stories of the residents. We didn't know what to ask so we didn't ask them much.\"},\r\n                    {name: \"Ryan\", text: \"It would have been better if we had set our goals before doing out research. We might have been able to ask the right questions during our research. This way, perhaps we could have learnt even more when talking to the residents during the VIA!\"},\r\n                    {name: \"Sarah\", text: \"Anyway, why is there a need to even learn about the stories of the beneficiaries?\"},\r\n                    {name: \"Mary\", text: `We would already have passed out when Chai Chee RCY next visits ${flags.name}${flags.sessions === consts.sessions.ONE ? `, even if we choose to visit them again` : \"\"}, so our learning is of no use.`},\r\n                    {name: \"Michael\", text: \"Well, hopefully it is of some use to our juniors...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA wasn't very meaningful for your committee members on a personal level... Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R105\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We did not find out early enough that the home needs funds, so we were unable to solve their problems.\"},\r\n                    {name: \"Ryan\", text: `Would we have been able to get a fundraising campaign approved just ${4 - flags.research.email} weeks before the VIA? I don't think we could have done much`},\r\n                    {name: \"Sarah\", text: \"Sigh. We have failed. We really should have started planning earlier...\"},\r\n                    {name: \"Mary\", text: \"While Sarah has a point, we could also have set our goals before doing our research so that we could have found out the residents' problems early enough for us to change our goals.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA was disappointing for your committee members on a personal level... Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R106\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We did not find out what the residents need, so we were unable to solve their problems.\"},\r\n                    {name: \"Ryan\", text: \"Sigh. We have failed.\"},\r\n                    {name: \"Sarah\", text: \"We could also have set our goals before doing our research so that we could have found out the residents' problems early enough for us to change our goals.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA was disappointing for your committee members on a personal level... Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R107\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"It was good that we knew that the home needed funds.\"},\r\n                    {name: \"Ryan\", text: \"Unfortunately, there was nothing much we could do.\"},\r\n                    {name: \"Sarah\", text: \"Then, what is the point behind this VIA? I think I have wasted my time. Should we apologise to the cadets for wasting their time?\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Looks like the VIA was disappointing for your committee members... Oh well...</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R108\": {\r\n        text: (flags) => (<React.Fragment>\r\n            <p>Here are what some of your committee members said during the debrief:</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"Haven't we learnt a lot about planning exciting activities? Good job, everyone!\"},\r\n                    {name: \"Ryan\", text: \"Sure we might've, Michael, but what's so meaningful about that?\"},\r\n                    {name: \"Sarah\", text: \"Hmm... you've got a point, Ryan. There were a lot more things we might've been able to learn from the VIA if we had set a better goal for ourselves to work towards.\"},\r\n                    {name: \"Mary\", text: \"Honestly, I didn't really enjoy planning activities. I'd much rather have focused on admin work. But at least the rest of you had fun.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>Hmm... Ryan may be right. This goal wasn't meaningful for everyone. Some people, like Mary, might have preferred another goal instead.</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n    \r\n    \"R8\": {\r\n        text: \"Your NCOs tell you that they have put in their best and have learnt more about the stories, but they ask you why is there a need to even learn about the stories of the beneficaries.\",\r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n\r\n    \"R9\": {\r\n        text: () => (<React.Fragment>\r\n            <p>During the debrief, you checked with your committee members on the goals that they have set at the start of the VIA.</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Michael\", text: \"We have learnt a lot about how to plan\"},\r\n                    {name: \"Ryan\", text: \"Yay!\"},\r\n                    {name: \"Sarah\", text: \"That seems to be all for our debrief!\"}\r\n                ]}\r\n                convos={[\r\n                    {\r\n                        q: \"Hold on. What exactly have we learnt about how to plan?\",\r\n                        a: [\r\n                            {name: \"Michael\", text: \"Uhh...\"},\r\n                            {name: \"Ryan\", text: \"I'm... not sure. We don't have a particular focus, do we?\"},\r\n                            {name: \"Sarah\", text: \"We had done the planning for the VIA.\"},\r\n                            {name: \"Mary\", text: \"Yeah. The VIA is done. That means we have learnt how to plan!\"}\r\n                        ]\r\n                    }\r\n                ]}\r\n                endOfConvo=\"Well, that sounds rather troubling...\"\r\n            />\r\n            </React.Fragment>),                    \r\n        option: [\r\n            {\r\n                text: \"Time to debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"It's all over!\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n\r\n    \"R10\": {\r\n        text: () => (<React.Fragment>\r\n            <p>During the debrief, you checked with your committee members on the goals that they have set at the start of the VIA.</p>\r\n            <p>You ask: Did you manage to achieve your goals today?</p>\r\n            <GroupConvo\r\n                cssClassMap={ncoChatClsMap}\r\n                startOfConvo={[{name: \"Michael\", text: \"Yep! I definitely learnt more about how to plan.\"}]}\r\n                convos={[\r\n                    {\r\n                        q: \"That's good! How so? I would like the others to share too!\",\r\n                        a: [\r\n                            {name: \"Michael\", text: \"I think I learnt to become more actively involved in the planning process, such as by providing feedback to others' ideas in a constructive manner, rather than shooting down their ideas immediately.\"},\r\n                            {name: \"Ryan\", text: \"I have learnt to be more organised when writing administrative plans in the proposal so that the plans are clear to everyone. This mitigates the risk of misinterpretation.\"}\r\n                        ]\r\n                    }\r\n                ]}\r\n                endOfConvo=\"The rest of the committee is eagerly raising their hands too. Wow! Looks like everyone took away something from the VIA.\"\r\n            />\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Fast forward to the end of the debrief and debrief the cadets\",\r\n                next: \"R4\",\r\n                condition: (flags) => flags.debrief === consts.debrief.NCO\r\n            },\r\n            {\r\n                text: \"Fast forward to the end of the debrief\",\r\n                next: \"END\",\r\n                condition: (flags) => flags.debrief !== consts.debrief.NCO,\r\n                fx: (flags) => flags.decisionVisibility.debrief = true,\r\n            }]\r\n    },\r\n\r\n    \"R12\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You ask your cadets - How did you all feel about the VIA experience?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Roy\", text: \"I didn't know what to expect. Aren't the VIAs just for the VIA hours anyways? So that we can get our LEAPS points...\" },\r\n                    { name: \"Liz\", text: \"Ya, I agree... If Ms Tan didn't call our parents to get us to come, I wouldn't come as well... I was pressured into coming...\" }\r\n                ]}\r\n                convos={[]}\r\n            />\r\n        </React.Fragment>),\r\n        option: [{\r\n            text: \"Ask another question\",\r\n            next: \"R12a\"\r\n        }]\r\n    },\r\n    \r\n    \"R12a\": {\r\n        text: () => (<React.Fragment>\r\n            <p>Oh dear... :(</p>\r\n            <p>Nevertheless, you decide to still ask: Okay never mind about that then... What did you guys learn today?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    { name: \"Jack\", text: \"I feel I didn't really learn anything much, because I didn't set out to learn anything in the first place...\" },\r\n                    { name: \"Roy\", text: \"Why do we need to learn from a VIA in the first place? Isn't it just to make the residents a bit happier?\" }\r\n                ]}\r\n                convos={[]}\r\n            />\r\n        </React.Fragment>),\r\n        option: [{\r\n            text: \"Oh no... this is sad... let's debrief the committee now.\",\r\n            next: \"R5\"\r\n        }]\r\n    },\r\n    \r\n    \"R13\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You ask your cadets: What did you guys learn today?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Jack\", text: \"Oh we set goals? Uh what were they again? I only remember that I wanted to have fun, but I think my idea of fun wasn't the same as the kids' idea of fun...\"},\r\n                    {name: \"Roy\", text: \"I think we didn't manage to achieve the goals... we didn't put in much effort into achieving them.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            <p>You are upset and don't understand why this happened. Do you want to ask them why this is so?</p>\r\n            </React.Fragment>),\r\n        option: [\r\n            {\r\n                text: \"Yes, I want to find out!\",\r\n                next: \"R13a\"\r\n            },\r\n            {\r\n                text: \"No, I think the cadets are sad, so we should wrap up...\",\r\n                next: \"R13b\"\r\n            }\r\n        ]\r\n    },\r\n\r\n    \"R13a\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You ask: I don't understand, why were you all unable to achieve the goals? Didn't you all agree to these goals with me?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Liz\", text: \"I think we felt they were a bit unreasonable, but none of us dared to voice out, because you are the OIC...\"},\r\n                    {name: \"Jack\", text: \"Ya, then I think the whole experience just felt a bit bad after that...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            </React.Fragment>),\r\n        option: [{\r\n            text: \"Oh no... let's wrap up...\",\r\n            next: \"R13b\"\r\n        }]\r\n    },\r\n    \r\n    \"R13b\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You ask: So overall, how did you all feel about this VIA experience?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Roy\", text: \"I wasn't very motivated to learn much from the VIA... I just went through the motions of talking to the residents... felt it was a waste of time.\"},\r\n                    {name: \"Liz\", text: \"Yeah, it was boring, I wasn't very interested to put in much effort...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            </React.Fragment>),\r\n        option: [{\r\n            text: \"Oh no... this is sad... let's debrief the committee now.\",\r\n            next: \"R5\"\r\n        }]\r\n    },\r\n\r\n    \"R14\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You ask your cadets: How did you all feel about the VIA experience?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Roy\", text: \"I think it was still ok! I think we served the residents well...\"},\r\n                    {name: \"Liz\", text: \"I think I may not have put in 100% but I still did try to serve the residents well.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            </React.Fragment>),\r\n        option: [{\r\n            text: \"Ok good start, let's find out more!\",\r\n            next: \"R14a\"\r\n        }]\r\n    },\r\n    \r\n    \"R14a\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You then proceed to ask: What did you guys learn today?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Jack\", text: \"Our goal was to learn as much as possible, which I think I did! I learnt a lot today - in fact I think I learnt as much as possible halfway through, so I stopped thinking about learning after that!\"},\r\n                    {name: \"Liz\", text: \"But what is a lot? I'm not sure, I didn't really know what I wanted to learn when I first came here, so didn't put a lot of effort into that... I focused mainly on helping the residents.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            </React.Fragment>),\r\n        option: [{\r\n            text: \"Hmm... could the goal have been more specific? It's okay, let's move on to debrief the committee first!\",\r\n            next: \"R5\"\r\n        }]\r\n    },\r\n\r\n    \"R15\": {\r\n        text: () => (<React.Fragment>\r\n            <p>\r\n                You ask your cadets: How did you all feel about the VIA experience?\r\n            </p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Roy\", text: \"I feel it was a meaningful experience! I was very motivated to serve the residents today and felt I did my best.\"},\r\n                    {name: \"Liz\", text: \"I agree! I felt that I had a reason to engage with the residents.\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            </React.Fragment>),\r\n        option: [{\r\n            text: \"It's great that they felt good! Did they learn?\",\r\n            next: \"R15a\"\r\n        }]\r\n    },\r\n    \r\n    \"R15a\": {\r\n        text: () => (<React.Fragment>\r\n            <p>You proceed to aks your cadets: What did you guys learn today?</p>\r\n            <GroupConvo\r\n                cssClassMap={cadetChatClsMap}\r\n                startOfConvo={[\r\n                    {name: \"Jack\", text: \"I felt that we hit our learning objective to learn more about the stories of the residents, because it was a clear, specific goal, so we could bear it in mind.\"},\r\n                    {name: \"Liz\", text: \"Yep, I really learnt a lot about the residents today! For example, I talked to Allam today, and learnt that he wants to become a rapper in future! I hope he succeeds...\"}\r\n                ]}\r\n                convos={[]}\r\n            />\r\n            </React.Fragment>),\r\n        option: [{\r\n            text: \"Yay they learnt! Let's debrief the committee now!\",\r\n            next: \"R5\"\r\n        }]\r\n    }\r\n}\r\n\r\nexport default reflectArcNodes\r\n","import React from 'react'\r\nimport consts from '../consts'\r\nimport NodeImg from '../NodeImg'\r\nimport Dialogue from '../convo/Dialogue'\r\nimport scroogeConvos from '../convo/scrooge'\r\nimport jonConvos from '../convo/jonathan'\r\nimport allamConvos from '../convo/allam'\r\nimport emilyConvos from '../convo/emily'\r\nimport carmenConvos from '../convo/carmen'\r\nimport Stars from '../stars'\r\n\r\nconst POOR_RESULTS = [consts.activities.AMONG_US, consts.books.HARD_TRUTHS, consts.songs.SCHOOL_SONG];\r\n\r\nconst calculateScore = (flags, finalChitChat) => {\r\n    const sustainability = flags.name === consts.SESAME ? 1 : 0;\r\n    const sessionSus = [consts.sessions.TWO_SPREAD, consts.sessions.FOUR].includes(flags.sessions) ? 1 : 0;\r\n    const chitChatScore = finalChitChat ? 1 : 0;\r\n    \r\n    let result = sustainability + chitChatScore + sessionSus\r\n\r\n    if (POOR_RESULTS.includes(flags.activity)) {\r\n        result += 0 //lol\r\n    } else if (flags.activity === consts.activities.CHIT_CHAT) {\r\n        result += 2\r\n    } else if (flags.activity === consts.activities.SOCCER) {\r\n        result += 3\r\n    } else if (flags.activity === consts.activities.KITE) {\r\n        result += 4\r\n    } else {\r\n        result += 1\r\n    }\r\n    return result\r\n}\r\n\r\nconst serveArcNodes = {\r\n    \"S1\": {\r\n        bgm: 'chariots-of-fire.mp3',\r\n        img: <NodeImg src=\"magic-schoolbus.jpg\" alt=\"School Bus\" />,\r\n        text: \"It is the day of the VIA! You board the bus with the unit to the VIA location.\",\r\n        option: [{\r\n            text: \"Exciting!\",\r\n            next: (flags) => flags.name === consts.SESAME ? \"S3\" : \"S2\"\r\n        }]\r\n    },\r\n\r\n    \"S2\": {\r\n        img: <NodeImg src=\"scared-kid.png\" alt=\"Scared\" />,\r\n        text: \"The children at Sunshine Home are a bit aloof and unfriendly towards the cadets as they have never seen them before.\",\r\n        option: [{\r\n            text: \"Aww...\",\r\n            next: \"S3\"\r\n        }]\r\n    },\r\n\r\n    \"S3\": {\r\n        bgm: (flags) => {\r\n            if (flags.activity === consts.activities.AMONG_US) {\r\n                return 'among-us.mp3';\r\n            } else if (Object.values(consts.songs).includes(flags.activity)) {\r\n                return serveArcNodes[\"S6\"].bgm(flags);\r\n            } else if (Object.values(consts.books).includes(flags.activity)) {\r\n                return serveArcNodes[\"S12\"].bgm(flags);\r\n            } else if (flags.activity === consts.activities.KITE) {\r\n                return null;\r\n            } else if (flags.activity === consts.activities.SOCCER) {\r\n                return 'this-time-for-africa.mp3';\r\n            }\r\n        },\r\n        img: (flags) => {\r\n            if (flags.activity === consts.activities.AMONG_US) {\r\n                return <NodeImg src=\"among-us.jpg\" alt=\"Among Us\" />;\r\n            } else if (Object.values(consts.songs).includes(flags.activity)) {\r\n                return serveArcNodes[\"S6\"].img(flags);\r\n            } else if (Object.values(consts.books).includes(flags.activity)) {\r\n                return serveArcNodes[\"S12\"].img(flags);\r\n            } else if (flags.activity === consts.activities.KITE) {\r\n                return serveArcNodes[\"S101\"].img;\r\n            } else if (flags.activity === consts.activities.SOCCER) {\r\n                return serveArcNodes[\"S17\"].img;\r\n            } else return <div />;\r\n        },\r\n        text: (flags) => `Let's begin with the activities! Your unit decided to ${flags.activity}.`,\r\n        option: [{\r\n            text: \"Proceed\",\r\n            next: (flags) => {\r\n                if (flags.activity === consts.activities.AMONG_US) {\r\n                    return \"S4\"\r\n                } else if (Object.values(consts.songs).includes(flags.activity)) {\r\n                    return \"S6\"\r\n                } else if (Object.values(consts.books).includes(flags.activity)) {\r\n                    return \"S12\"\r\n                } else if (flags.activity === consts.activities.SOCCER) {\r\n                    return \"S17\"\r\n                } else if (flags.activity === consts.activities.CHIT_CHAT) {\r\n                    return \"S19\"\r\n                } else if (flags.activity === consts.activities.KITE) {\r\n                    return \"S101\"\r\n                }\r\n            },\r\n        }]\r\n    },\r\n\r\n    \"S4\": {\r\n        img: <NodeImg src=\"NotLikeDuck.png\" />,\r\n        text: \"Oh dear, you discovered that most of the kids do not have smartphones... What should you do?\",\r\n        option: [\r\n            {\r\n                text: \"Let the cadets play and let the kids watch\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Let's just give up on this and chit chat with them instead...\",\r\n                next: \"S19\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, true); }\r\n            }]\r\n    },\r\n\r\n    \"S6\": {\r\n        bgm: (flags) => {\r\n            if (flags.activity === consts.songs.K_POP) {\r\n                return 'public/bgm/dynamite.mp3';\r\n            } else if (flags.activity === consts.songs.NDP) {\r\n                return 'home.mp3';\r\n            } else if (flags.activity === consts.songs.RAP) {\r\n                return 'eminem.mp3';\r\n            } else if (flags.activity === consts.songs.OLD) {\r\n                return null;\r\n            } else if (flags.activity === consts.songs.SCHOOL_SONG) {\r\n                return 'make-a-change.mp3';\r\n            }\r\n        },\r\n        img: (flags, isMuted) => {\r\n            if (flags.activity === consts.songs.K_POP) {\r\n                return <NodeImg src=\"bts.jpg\" alt=\"BTS\" />;\r\n            } else if (flags.activity === consts.songs.NDP) {\r\n                return <NodeImg src=\"home.png\" alt=\"Home\" />;\r\n            } else if (flags.activity === consts.songs.RAP) {\r\n                return <NodeImg src=\"eminem.png\" alt=\"Eminem\" />;\r\n            } else if (flags.activity === consts.songs.OLD) {\r\n                return (<div className=\"iframe-container\"><iframe src=\"https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1\" frameBorder=\"0\" allow=\"autoplay; accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen title=\"80s song\" /></div>);\r\n            } else return <div />;\r\n        },\r\n        text: \"You begin with the sing-along session...\",\r\n        option: [{\r\n            text: \"Let's start singing!\",\r\n            next: (flags) => {\r\n                if (flags.activity === consts.songs.RAP) {\r\n                    return \"S9\"\r\n                } else if (flags.activity === consts.songs.SCHOOL_SONG) {\r\n                    return \"S11\"\r\n                } else return \"S7\";\r\n            }\r\n        }]\r\n    },\r\n\r\n    \"S7\": {\r\n        img: (flags) => serveArcNodes[\"S6\"].img(flags),\r\n        text: \"Some of the kids sing along, but many of the rest go back to doing what they usually do instead...\",\r\n        option: [\r\n            {\r\n                text: \"Let's just keep singing\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S9\": {\r\n        img: (flags) => serveArcNodes[\"S6\"].img(flags),\r\n        text: (flags) => (<p>\r\n            You find that one kid{flags.research.recce && \", Allam,\"} is very excited, and in fact sings\r\n            some songs that even your cadets don't know. However, the rest of the kids quickly lose interest and turn\r\n            back to their usual activities instead...\r\n        </p>),\r\n        option: [\r\n            {\r\n                text: \"Let's just keep singing\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S11\": {\r\n        img: <NodeImg src=\"jerry.jpg\" />,\r\n        text: \"The kids look very confused at all of you, then go back to doing their usual activities...\",\r\n        option: [\r\n            {\r\n                text: \"Let's just keep singing\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S12\": {\r\n        bgm: (flags) => {\r\n            if (flags.activity === consts.books.SNOW_WHITE) {\r\n                return \"twinkle-twinkle.mp3\";\r\n            } else if (flags.activity === consts.books.GERONIMO) {\r\n                return \"geronimo.mp3\";\r\n            } else if (flags.activity === consts.books.HARRY_POTTER) {\r\n                return \"harry-potter.mp3\";\r\n            } else if (flags.activity === consts.books.HARD_TRUTHS) {\r\n                return \"tentera.mp3\";\r\n            }\r\n        },\r\n        img: (flags) => serveArcNodes[serveArcNodes[\"S12\"].option[0].next(flags)].img,\r\n        text: \"Your cadets start reading the books to the children...\",\r\n        option: [{\r\n            text: \"Continue...\",\r\n            next: (flags) => {\r\n                if (flags.activity === consts.books.SNOW_WHITE) {\r\n                    return \"S13\"\r\n                } else if (flags.activity === consts.books.GERONIMO) {\r\n                    return \"S14\"\r\n                } else if (flags.activity === consts.books.HARRY_POTTER) {\r\n                    return \"S15\"\r\n                } else if (flags.activity === consts.books.HARD_TRUTHS) {\r\n                    return \"S16\"\r\n                }\r\n            }\r\n        }]\r\n    },\r\n\r\n    \"S13\": {\r\n        img: (<div className=\"book-catalogue\">\r\n            <NodeImg src=\"snow-white.jpg\" alt=\"Snow White\"/>\r\n            <NodeImg src=\"three-little-pigs.jpg\" alt=\"Three Little Pigs\"/>\r\n        </div>),\r\n        text: \"The youngest kids listen attentively to the cadets reading, but the older ones get bored and quickly go back to doing their work.\",\r\n        option: [\r\n            {\r\n                text: \"Let's continue reading\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S14\": {\r\n        img: (<div className=\"book-catalogue\">\r\n            <NodeImg src=\"geronimo-stilton.jpg\" alt=\"Geronimo Stilton\"/>\r\n            <NodeImg src=\"enid-blyton.jpg\" alt=\"Enid Blyton\"/>\r\n        </div>),\r\n        text: \"The younger kids listen to the cadets reading, but the older ones get bored and go back to doing their work.\",\r\n        option: [\r\n            {\r\n                text: \"Let's continue reading\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S15\": {\r\n        img: (<div className=\"book-catalogue\">\r\n            <NodeImg src=\"harry-potter.jpg\" alt=\"Harry Potter\"/>\r\n            <NodeImg src=\"percy-jackson.jpg\" alt=\"Percy Jackson\"/>\r\n        </div>),\r\n        text: \"Some of the older kids listen to the cadets reading, but the rest get bored and go back to doing their work. The younger kids are quite confused about the story and frequently interrupt the cadets reading.\",\r\n        option: [\r\n            {\r\n                text: \"Let's continue reading\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S16\": {\r\n        img: <NodeImg src=\"hard-truths.jpg\" alt=\"Hard Truths\"/>,\r\n        text: \"The kids look very confused during the reading session and they go back to doing their work.\",\r\n        option: [\r\n            {\r\n                text: \"Let's continue reading\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { flags.result = calculateScore(flags, false); }\r\n            },\r\n            {\r\n                text: \"Start chit-chatting with the kids\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S17\": {\r\n        img: <NodeImg src=\"soccer.png\" alt=\"Soccer\" />,\r\n        text: \"Many (but not all) of the kids are very excited to play soccer. Your committee organized them into various age groups and the kids are having a great time. During the breaks in between some of the games, you start talking to some of the kids from the home...\",\r\n        option: [{\r\n            text: \"Continue...\",\r\n            next: \"S19\",\r\n        }]\r\n    },\r\n\r\n    \"S18\": {\r\n        img: (<Stars label=\"Service\" rating={1} />), // 1-star activity\r\n        text: \"The VIA is coming to its end. The unit wasn't able to engage the vast majority of the kids at the home. You feel disappointed by the VIA...\",\r\n        option: [{\r\n            text: \"Oh no...\",\r\n            next: \"R1\"\r\n        }]\r\n    },\r\n\r\n    \"S101\": {\r\n        img: (<div className=\"iframe-container\"><iframe src=\"https://www.youtube.com/embed/1TroueqxAtM\" frameborder=\"0\" width=\"100%\" allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen title=\"Kite-Fighting\" /></div>),\r\n        text: \"Incredibly, all of the kids are ecstatic to play kite-fighting. They start showing off their kites as well as the various techniques they use to defeat others' kites to your cadets. Everyone is enjoying themselves greatly. During the breaks in the game, you start talking to some of the kids from the home.\",\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"S19\",\r\n        }]\r\n    },\r\n\r\n    \"S19\": {\r\n        bgm: 'reunited.mp3',\r\n        text: \"Which of the people at the home would you like to talk to?\",\r\n        option: [\r\n            {\r\n                text: \"Speak to Home Director, Mr Scrooge\",\r\n                next: \"S20\",\r\n                fx: (flags) => { flags.finalSpokeToScrooge = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 16 year old Jonathan\",\r\n                next: \"S21\",\r\n                fx: (flags) => { flags.finalSpokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 14 year old Allam\",\r\n                next: \"S22\",\r\n                fx: (flags) => { flags.finalSpokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 10 year old Emily\",\r\n                next: \"S23\",\r\n                fx: (flags) => { flags.finalSpokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Speak to 9 year old Carmen\",\r\n                next: \"S24\",\r\n                fx: (flags) => { flags.finalSpokeToResidents = true; }\r\n            },\r\n            {\r\n                text: \"Wrap up the VIA\",\r\n                next: \"S32767\",\r\n                fx: (flags) => { \r\n                    flags.finalChitChat = true;\r\n                    flags.result = calculateScore(flags, true);\r\n                }\r\n            }]\r\n    },\r\n\r\n    \"S20\": {\r\n        img: (<NodeImg src=\"scrooge.jpg\" alt=\"scrooge\" />),\r\n        text: (flags) => (<Dialogue\r\n            startOfConvo={`Hope you are having a great time here at ${flags.name}! I am Ebenzer Scrooger, the Home Director. Feel free to ask me anything about this place!`}\r\n            speakerClass=\"scrooge-speech\"\r\n            convos={scroogeConvos}\r\n            name=\"Mr. Scrooge\" />),\r\n        option: [{\r\n            text: \"Go back to talk to the others\",\r\n            next: \"S19\"\r\n        }]\r\n    },\r\n\r\n    \"S21\": {\r\n        text: () => (<Dialogue\r\n            startOfConvo=\"Hi... I'm Jonathan, and I'm 16 years old.\"\r\n            speakerClass=\"jon-speech\"\r\n            convos={jonConvos}\r\n            name=\"Jonathan\"\r\n        />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S22\": {\r\n        text: () => (<Dialogue \r\n            startOfConvo=\"Sup. I'm Allam, and I'm 14.\"\r\n            speakerClass=\"allam-speech\"\r\n            convos={allamConvos}\r\n            name=\"Allam\"\r\n        />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S23\": {\r\n        text: () => (<Dialogue \r\n            startOfConvo=\"Umm... hello! I'm Emily!\"\r\n            speakerClass=\"emily-speech\"\r\n            convos={emilyConvos}\r\n            name=\"Emily\"\r\n        />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S24\": {\r\n        text: () => (<Dialogue \r\n            startOfConvo=\"I'm Carmen...\"\r\n            speakerClass=\"carmen-speech\"\r\n            convos={carmenConvos}\r\n            name=\"Carmen\"\r\n        />),\r\n        option: [\r\n            {\r\n                text: \"Go back to talk to the others\",\r\n                next: \"S19\"\r\n            }]\r\n    },\r\n\r\n    \"S32767\": {\r\n        bgm: 'watashi-no-uso.mp3',\r\n        img: (flags) => (<Stars label=\"Service\" rating={flags.result} />),\r\n        text: (flags) => (<p>{makeDescription(flags.name === consts.SESAME, flags.activity, flags.result)}</p>),\r\n        option: [{\r\n            text: \"Continue\",\r\n            next: \"R1\",\r\n        }]\r\n    },\r\n}\r\n\r\nconst makeDescription = (isSesame, activity, score) => {\r\n    let str = isSesame ? \"Many of the kids remember your unit from the previous visit and were excited to see you again.\" : \"The atmosphere was rather awkward as many of the kids at the home were unfriendly with you.\"\r\n\r\n    if (POOR_RESULTS.includes(activity)) {\r\n        const didChitChat = (score - isSesame ? 1 : 0) === 1;\r\n        str += isSesame ? \" Unfortunately,\" : \" Furthermore,\";\r\n        if (didChitChat) str += \" the VIA had a pretty disastrous start as\";\r\n        str += \" the vast majority of the kids at the home were uninterested in what your unit planned.\"\r\n\r\n        if (didChitChat) str += \" At least some of the kids and cadets are talking with each other...\"\r\n\r\n        // Chit chat\r\n    } else if (activity === consts.activities.CHIT_CHAT) {\r\n        str += isSesame ? \"\" : \" Nevertheless, they warmed up to the cadets.\";\r\n        str += \" You see that many of the kids and the cadets were talking animatedly with each other.\";\r\n\r\n        // Soccer\r\n    } else if (activity === consts.activities.SOCCER) {\r\n        str += isSesame ? \" M\" : \" Nevertheless, m\";\r\n        str += \"ost of the kids and the cadets were enjoying themselves greatly playing soccer, and many of them bonded closely over the fun that they are having.\";\r\n\r\n        // Kite-fighting\r\n    } else if (activity === consts.activities.KITE) {\r\n        str += isSesame ? \" Incredibly,\" : \" Despite that,\";\r\n        str += \" you notice that all of the kids had a lot of fun fighting kites and your cadets felt very satisfied learning how to fight kites from the children from the home.\";\r\n\r\n        // otherwise\r\n    } else {\r\n        const didChitChat = (score - isSesame ? 1 : 0) === 2;\r\n        str += isSesame ? \" Unfortunately,\" : \" Furthermore,\";\r\n        if (didChitChat) str += \" the VIA had a pretty weak start as\";\r\n        str += \" many kids at the home weren't engaged by what your unit planned.\"\r\n\r\n        if (didChitChat) str += \" At least some of the kids and cadets are talking with each other...\"\r\n    }\r\n\r\n    if (score === 7) {\r\n        str += \" This VIA has been an incredible success and you are extremely proud of your committee and your cadets for that!\";\r\n    } else if (score > 4 && score < 7) {\r\n        str += \" This VIA has been rather successful. Nevertheless, you can't help but wonder what you could have done to make it even better...\";\r\n    } else if (score < 5 && score > 2) {\r\n        str += \" This VIA has been okay but there is definitely room for improvement...\";\r\n    } else if (score === 2) {\r\n        str += \" This VIA wasn't so good and there was definitely a lot that needed improvement...\";\r\n    } else {\r\n        str += \" This VIA has gone pretty badly and you feel very disappointed...\";\r\n    }\r\n\r\n    return `The VIA has come to an end. ${str}`\r\n}\r\n\r\nexport default serveArcNodes\r\n\r\n","import askArcNodes from './arcs/ask'\r\nimport devNodes from './arcs/dev'\r\nimport endNodes from './arcs/end'\r\nimport homeArcNodes from './arcs/home'\r\nimport learnArcNodes from './arcs/learn'\r\nimport planArcNodes from './arcs/plan'\r\nimport reflectArcNodes from './arcs/reflect'\r\nimport serveArcNodes from './arcs/serve'\r\nimport {getInitialFlags} from './Game'\r\n\r\nlet nodeoof = {\r\n    index: \"oof\",\r\n    text: \"Still under development UwU. Please refresh page.\",\r\n    option: [{\r\n        text: \"Back to start\",\r\n        next: \"H0\",\r\n        fx: (flags) => {Object.assign(flags, getInitialFlags())} //reset flags\r\n    }]\r\n}\r\n\r\nconst nodes = {\r\n    ...homeArcNodes,\r\n    ...learnArcNodes,\r\n    ...planArcNodes,\r\n    ...askArcNodes,\r\n    ...serveArcNodes,\r\n    ...reflectArcNodes,\r\n    ...endNodes,\r\n    ...devNodes\r\n    \r\n}   \r\n\r\nexport function getNode(i) {\r\n    let node = nodes[i];\r\n    if (node === undefined) {\r\n        return nodeoof\r\n    }\r\n    return node;\r\n}\r\n","import clsx from 'clsx';\r\nimport React from 'react';\r\nimport './App.css';\r\nimport {getNode} from './data';\r\n//import pic from './bridge.jpg';\r\n\r\nexport class Node extends React.Component {\r\n    \r\n    constructor(props) {\r\n        super(props)\r\n        this.handleClick = this.handleClick.bind(this)\r\n        this.textgen = this.textgen.bind(this)\r\n        this.buttongen = this.buttongen.bind(this)\r\n        this.doBgmChange = this.doBgmChange.bind(this)\r\n    }\r\n\r\n    doBgmChange(next, flags) {\r\n        let bgm = getNode(next).bgm;\r\n\r\n        if (bgm instanceof Function) {\r\n            bgm = bgm(this.props.flags);\r\n        }\r\n\r\n        if (bgm !== undefined) {\r\n            this.props.onMusicChange(bgm, flags);\r\n        }\r\n    }\r\n    \r\n    handleClick(opt) {\r\n        let next = opt.next\r\n        if (opt.next instanceof Function) {\r\n            next = opt.next(this.props.flags)\r\n        }\r\n\r\n        if (\"fx\" in opt) {\r\n            return () => {\r\n                this.props.trigger(next);\r\n                this.props.dispatch(opt.fx);\r\n                this.doBgmChange(next, this.props.flags)\r\n            }\r\n        }\r\n        \r\n        return () => { \r\n            this.props.trigger(next) ;\r\n            this.doBgmChange(next, this.props.flags)\r\n        }\r\n    }\r\n\r\n    imggen(obj) {\r\n        if (obj instanceof Function) {\r\n            return obj(this.props.flags, this.props.isMuted);\r\n        } else if (obj === undefined) {\r\n            return <React.Fragment />;\r\n        } else return obj;\r\n    }\r\n    \r\n    textgen(txt) {\r\n        if (txt instanceof Function) {\r\n            return txt(this.props.flags);\r\n        } else {\r\n            return (<p>{txt}</p>)\r\n        }\r\n    }\r\n    \r\n    buttongen(opt, i) {\r\n        if (\"condition\" in opt) {\r\n            if (!opt.condition(this.props.flags)) {\r\n                return\r\n            }\r\n        }\r\n        return (<button key={i} onClick={this.handleClick(opt)}>{opt.text instanceof Function ? opt.text(this.prop.flags) : opt.text}</button>)\r\n    }\r\n    \r\n    render() {\r\n        \r\n        return (\r\n            <div className={clsx(\"Node\", this.props.sidebarShown && \"sidebar-active\")}>\r\n                {this.imggen(this.props.data.img)}\r\n                {this.textgen(this.props.data.text)}\r\n                <div className=\"btn-container\">{this.props.data.option.map((opt, i) => this.buttongen(opt, i))}</div>\r\n            </div>)\r\n    }\r\n}\r\n\r\nexport default Node\r\n","import {faVolumeMute, faVolumeUp} from '@fortawesome/free-solid-svg-icons';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport clsx from 'clsx';\r\nimport React from 'react';\r\nimport {getCadetGoalTitleAndEntry, getChitChatTitleAndEntry, getDebriefTitleAndEntry, getLocationChoiceText, getNcoGoalTitleAndEntry, getNcoRnGTitleAndEntry, getResearchTitleAndEntry} from './analysis';\r\nimport './sidebar.css';\r\nimport {SimpleEntry} from './timeline';\r\n\r\nconst Sidebar = (props) => {\r\n    const { sidebarShown, flags, volume, onVolumeChange, isMuted, onMuteToggle } = props;\r\n\r\n    const handleVolumeChange = (event) => {\r\n        onVolumeChange(event.target.value);\r\n\r\n        if (isMuted && event.target.value > 0) {\r\n            onMuteToggle()\r\n        }\r\n    }\r\n\r\n    const handleMuteToggle = () => {\r\n        if (!isMuted && volume < 1) onVolumeChange(70);\r\n        else onMuteToggle();\r\n    }\r\n\r\n    return (<div className={clsx(\"sidebar\", sidebarShown && \"active\")}>\r\n            <a href=\"https://tinyurl.com/slnotes2020\" target=\"_blank\" rel=\"noreferrer\" className=\"btn\">SL Notes</a>\r\n            <div className=\"volume-control\">\r\n                <button className=\"icon-btn\" onClick={handleMuteToggle}><FontAwesomeIcon icon={(isMuted || volume < 1) ? faVolumeMute : faVolumeUp} size=\"lg\" /></button>\r\n                <div className=\"slider-container\">\r\n                    <input type=\"range\" name=\"Volume\" min=\"0\" max=\"100\" className=\"slider\" value={isMuted ? 0 : volume} onChange={handleVolumeChange} />\r\n                </div>\r\n                <div className=\"volume-number\">{isMuted ? 0 : volume}</div>\r\n            </div>\r\n            <div className=\"analysis\">\r\n                <h5>Major Decisions Made</h5>\r\n                <div className=\"timeline\">\r\n                    <SimpleEntry>Start</SimpleEntry>\r\n                    {flags.name === \"default\" || <SimpleEntry>{getLocationChoiceText(flags.name)[0]}</SimpleEntry>}\r\n                    {flags.decisionVisibility.ncogoal && <SimpleEntry>{getNcoGoalTitleAndEntry(flags.ncogoal)[0]}</SimpleEntry>}\r\n                    {flags.decisionVisibility.research && <SimpleEntry>{getResearchTitleAndEntry(flags.research)[0]}</SimpleEntry>}\r\n                    {flags.activity && <SimpleEntry>Your unit chose to {flags.activity}.</SimpleEntry>}\r\n                    {flags.sessions && <SimpleEntry>Your unit chose to have {flags.sessions}.</SimpleEntry>}\r\n                    {flags.decisionVisibility.rolesandgoals && <SimpleEntry>{getNcoRnGTitleAndEntry(flags.rolesandgoals)[0]}</SimpleEntry>}\r\n                    {flags.decisionVisibility.cadetgoal && <SimpleEntry>{getCadetGoalTitleAndEntry(flags.cadetgoal)[0]}</SimpleEntry>}\r\n                    {flags.result === null || <SimpleEntry>{getChitChatTitleAndEntry(flags.activity, flags.finalChitChat)[0]}</SimpleEntry>}\r\n                    {flags.decisionVisibility.debrief && <SimpleEntry>{getDebriefTitleAndEntry(flags.debrief)[0]}</SimpleEntry>}\r\n                </div>\r\n            </div>\r\n    </div>)\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport consts from './consts';\r\nimport * as data from './data.js';\r\nimport Node from './Node.js';\r\nimport Sidebar from './Sidebar';\r\n\r\nconst initialFlags = JSON.stringify({\r\n    name: \"default\",\r\n    research: {\r\n        call: false,\r\n        freeTime: false,\r\n        recce: false,\r\n        brochure: false,\r\n        email: 0,\r\n        spokeToScrooge: false,\r\n        spokeToResidents: false\r\n    },\r\n    sessions: \"\",\r\n    ncogoal: consts.ncogoals.NONE,\r\n    activity: \"\",\r\n    rolesandgoals: consts.rolesandgoals.NONE,\r\n    cadetgoal: consts.cadetgoal.NONE,\r\n    finalChitChat: false,\r\n    finalSpokeToScrooge: false,\r\n    finalSpokeToResidents: false,\r\n    result: null,\r\n    lastNode: \"\",\r\n    debrief: \"\",\r\n    noTimeToDebriefCadets: false,\r\n    decisionVisibility: {\r\n        research: false,\r\n        ncogoal: false,\r\n        rolesandgoals: false,\r\n        cadetgoal: false,\r\n        debrief: false,\r\n    },\r\n    midEvent: null,\r\n});\r\n\r\nexport const getInitialFlags = () => JSON.parse(initialFlags);\r\n\r\nconst reducer = (state, action) => {\r\n    const draftOfState = { ...state };\r\n    action(draftOfState);\r\n    return draftOfState;\r\n}\r\n\r\nconst keySequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA']\r\nconst endingPos = keySequence.length - 1;\r\n\r\nconst Game = (props) => {\r\n    const [node, setNode] = React.useState(\"H0\");\r\n    const [flags, flagDispatch] = React.useReducer(reducer, getInitialFlags());\r\n    const [seqPos, setSeqPos] = React.useState(0);\r\n\r\n    const [touchStart, setTouchStart] = React.useState(null);\r\n    const [touchEnd, setTouchEnd] = React.useState(null);\r\n\r\n    const { onMusicChange, onMusicDisable, sidebarShown, onSidebarChange, ...other } = props;\r\n\r\n    const handleTouchStart = (e) => {\r\n        setTouchStart(e.targetTouches[0].clientX);\r\n    }\r\n\r\n    const handleTouchMove = (e) => {\r\n        setTouchEnd(e.targetTouches[0].clientX);\r\n    }\r\n\r\n    const handleTouchEnd = () => {\r\n        const threshold = window.innerWidth * 0.25 + 80;\r\n\r\n        if (touchEnd === null) return;\r\n\r\n        if (touchStart - touchEnd > threshold) {\r\n            onSidebarChange(true);\r\n        } else if (touchEnd - touchStart > threshold) {\r\n            onSidebarChange(false);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const keypressListener = (e) => {\r\n            if (e.code === keySequence[seqPos]) {\r\n                if (seqPos === endingPos) {\r\n                    setSeqPos(0);\r\n                    flagDispatch((flags) => { flags.lastNode = node; })\r\n                    setNode(\"dev0\");\r\n                } else {\r\n                    setSeqPos(seqPos + 1);\r\n                }\r\n            } else {\r\n                setSeqPos(0);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('keydown', keypressListener);\r\n\r\n        return () => {\r\n            document.removeEventListener('keydown', keypressListener);\r\n        };\r\n   }, [seqPos, setSeqPos, node, flagDispatch]);\r\n\r\n    React.useEffect(() => {\r\n        if (node === 'H0.5') onMusicDisable();\r\n    }, [node, onMusicDisable]);\r\n\r\n\r\n    return (\r\n        <div onTouchStart={handleTouchStart} onTouchMove={handleTouchMove} onTouchEnd={handleTouchEnd}>\r\n        <Node trigger={setNode} data={data.getNode(node)} flags={flags} dispatch={flagDispatch} onMusicChange={onMusicChange} sidebarShown={sidebarShown}  />\r\n        <Sidebar sidebarShown={sidebarShown} flags={flags} {...other} />\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Game;\r\n","export const CROSSFADE_STEP_SIZE = 0.02;\r\n\r\nconst createHTMLAudioElement = (fileName) => {\r\n    const el = new Audio(`${process.env.PUBLIC_URL}/bgm/${fileName}`);\r\n    el.loop = true;\r\n    return el;\r\n}\r\n\r\nexport const musicStates = {\r\n    START: 'start',\r\n    PLAYING: 'playing',\r\n    MUTED: 'muted',\r\n    DISABLED: 'disabled',\r\n    CROSSFADING: 'cross-fading',\r\n    CROSSFADED: 'cross-faded',\r\n    FADING_IN: 'fading in',\r\n    FADING_OUT: 'fading out',\r\n    FADED_OUT: 'faded out',\r\n}\r\n\r\nconst mutedStates = [musicStates.MUTED, musicStates.FADED_OUT, musicStates.FADING_OUT];\r\n\r\nexport const checkIsMuted = (state) => mutedStates.includes(state);\r\n\r\n// active and next[...] are instances of HTMLAudioElement\r\nexport const initialMusic = {\r\n    state: musicStates.START,\r\n    active: createHTMLAudioElement('tunak.mp3'),\r\n    fadeOut: [],\r\n    fadeProgress: 1, // varies from 0 to 1\r\n}\r\n\r\nexport const actionTypes = {\r\n    DISABLE: 'DISABLE',\r\n    PLAY: 'PLAY',\r\n    MUTE: 'MUTE',\r\n    PAUSE: 'PAUSE',\r\n    CHANGE: 'CHANGE',\r\n    CLEANUP_CHANGE: 'CLEANUP_CHANGE',\r\n    EVOLVE: 'EVOLVE', // for the state to evolve during crossfade\r\n}\r\n\r\nexport const musicStateReducer = (state, action) => {\r\n    if (state.active === null) return state;\r\n\r\n    switch (action.type) {\r\n        case actionTypes.DISABLE:\r\n            return {\r\n                state: musicStates.DISABLED,\r\n                active: null,\r\n                fadeOut: [],\r\n                fadeProgress: 1,\r\n            }\r\n\r\n        case actionTypes.PLAY:\r\n            return {\r\n                state: musicStates.FADING_IN,\r\n                active: state.active,\r\n                fadeOut: [],\r\n                fadeProgress: 1 - state.fadeProgress,\r\n            };\r\n\r\n        case actionTypes.MUTE:\r\n            state.active.amplitude = state.active.volume;\r\n\r\n            return {\r\n                state: musicStates.FADING_OUT, \r\n                active: state.active, \r\n                fadeOut: [], \r\n                fadeProgress: 1 - state.fadeProgress,\r\n            };\r\n\r\n        case actionTypes.PAUSE:\r\n            return {\r\n                state: musicStates.MUTED,\r\n                active: state.active,\r\n                fadeOut: [],\r\n                fadeProgress: 1,\r\n            };\r\n\r\n        case actionTypes.CHANGE:\r\n            if (state.active.src === action.payload.src) return state;\r\n            if (state.state === musicStates.MUTED || state.state === musicStates.FADED_OUT)\r\n                return {\r\n                    state: musicStates.MUTED,\r\n                    active: action.payload,\r\n                    fadeOut: [],\r\n                    fadeProgress: 1,\r\n                };\r\n\r\n            state.fadeOut.forEach((audio) => { audio.amplitude = audio.volume });\r\n            state.active.amplitude = state.active.volume;\r\n\r\n            return {\r\n                state: musicStates.CROSSFADING,\r\n                active: action.payload,\r\n                fadeOut: [...state.fadeOut, state.active],\r\n                fadeProgress: 0,\r\n            };\r\n\r\n        case actionTypes.CLEANUP_CHANGE:\r\n            return {\r\n                state: musicStates.PLAYING,\r\n                active: state.active,\r\n                fadeOut: [],\r\n                fadeProgress: 1,\r\n            }\r\n\r\n        default: {\r\n            // evolution\r\n            const oldProgress = state.fadeProgress;\r\n            if (oldProgress === 1) return state;\r\n\r\n            const newProgress = Math.min(oldProgress + action.payload, 1);\r\n\r\n            let newState;\r\n\r\n            if (newProgress !== 1) {\r\n                newState = state.state;\r\n            } else if (state.state === musicStates.FADING_OUT) {\r\n                newState = musicStates.FADED_OUT;\r\n            } else if (state.state === musicStates.FADING_IN) {\r\n                newState = musicStates.PLAYING;\r\n            } else {\r\n                newState = musicStates.CROSSFADED;\r\n            }\r\n\r\n            return {\r\n                state: newState,\r\n                active: state.active,\r\n                fadeOut: state.fadeOut,\r\n                fadeProgress: newProgress\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nexport const createPlayAction = () => ({ type: actionTypes.PLAY });\r\nexport const createMuteAction = () => ({ type: actionTypes.MUTE });\r\nexport const createPauseAction = () => ({ type: actionTypes.PAUSE });\r\nexport const createEvolveAction = (stepSize = CROSSFADE_STEP_SIZE) => ({ type: actionTypes.EVOLVE, payload: stepSize });\r\nexport const createChangeAction = (fileName) => ({ type: actionTypes.CHANGE, payload: createHTMLAudioElement(fileName) });\r\nexport const createPostChangeAction = () => ({ type: actionTypes.CLEANUP_CHANGE });\r\nexport const createDisableAction = () => ({ type: actionTypes.DISABLE });\r\n","import {faBars} from '@fortawesome/free-solid-svg-icons';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport clsx from 'clsx';\r\nimport React from 'react';\r\nimport NodeImg from './NodeImg';\r\n\r\nconst Navbar = (props) => {\r\n    const { sidebarShown, onSidebarToggle } = props;\r\n\r\n    return (<header className=\"navbar\">\r\n        <div className=\"navbar-left\">\r\n            <NodeImg src=\"sl-gold.png\" />\r\n            <div className=\"title\">VIA Adventure</div>\r\n        </div>\r\n        <div className=\"navbar-right\">\r\n            <button className={clsx(\"btn\", sidebarShown && \"active\")} onClick={onSidebarToggle}><FontAwesomeIcon icon={faBars} /></button>\r\n        </div>\r\n    </header>);\r\n\r\n}\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Game from './Game.js';\r\nimport {checkIsMuted, createChangeAction, createDisableAction, createEvolveAction, createMuteAction, createPauseAction, createPlayAction, createPostChangeAction, CROSSFADE_STEP_SIZE, initialMusic, musicStateReducer, musicStates} from './music';\r\nimport Navbar from './Navbar';\r\n\r\nconst FADE_DURATION_IN_MS = 500;\r\n\r\nfunction App() {\r\n    const [audioState, audioDispatch] = React.useReducer(musicStateReducer, initialMusic)\r\n    const [volume, setVolume] = React.useState(70);\r\n    const [sidebarShown, setSidebarShown] = React.useState(() => {\r\n        return window.innerWidth >= 960\r\n    })\r\n\r\n    const handleMuteToggle = () => {\r\n        if (!audioState.active) return;\r\n        if (checkIsMuted(audioState.state)) {\r\n            audioState.active.play();\r\n            audioDispatch(createPlayAction());\r\n        } else {\r\n            audioState.active.pause();\r\n            audioDispatch(createMuteAction());\r\n        }\r\n    }\r\n\r\n    const handleMusicChange = (fileName) => {\r\n        audioDispatch(createChangeAction(fileName));\r\n    }\r\n\r\n    const handleMusicDisable = () => {\r\n        audioDispatch(createDisableAction());\r\n    }\r\n\r\n    const handleSidebarToggle = () => {\r\n        setSidebarShown(!sidebarShown);\r\n    }\r\n\r\n    const handleVolumeChange = (volume) => {\r\n        setVolume(volume);\r\n        audioState.active.volume = volume / 100;\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (!audioState.active) return;\r\n            audioDispatch(createEvolveAction());\r\n\r\n            switch (audioState.state) {\r\n                case musicStates.FADING_IN:\r\n                    audioState.active.volume = (volume / 100) * Math.sin(audioState.fadeProgress * Math.PI / 2);\r\n                    break;\r\n\r\n                case musicStates.FADING_OUT:\r\n                    audioState.active.volume = (volume / 100) * audioState.active.amplitude * Math.cos(audioState.fadeProgress * Math.PI / 2);\r\n                    break;\r\n\r\n                case musicStates.FADED_OUT:\r\n                    audioState.active.pause();\r\n                    audioState.fadeOut.forEach((audio) => { audio.pause() });\r\n                    audioDispatch(createPauseAction());\r\n                    break;\r\n\r\n                case musicStates.CROSSFADING:\r\n                    audioState.active.play();\r\n                    audioState.active.volume = Math.sin(audioState.fadeProgress * Math.PI / 2) * volume / 100;\r\n                    audioState.fadeOut.forEach((audio) => {\r\n                        audio.volume = audio.amplitude * Math.cos(audioState.fadeProgress * Math.PI / 2) * volume / 100;\r\n                    })\r\n                    break;\r\n\r\n                case musicStates.CROSSFADED:\r\n                    audioState.active.play();\r\n                    audioState.fadeOut.forEach((audio) => { audio.pause() });\r\n                    audioDispatch(createPostChangeAction());\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }, FADE_DURATION_IN_MS * CROSSFADE_STEP_SIZE);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [audioDispatch, audioState])\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Navbar sidebarShown={sidebarShown} onSidebarToggle={handleSidebarToggle} />\r\n        <div className=\"App App-header\">\r\n        <Game \r\n        audioState={audioState} \r\n        onMusicChange={handleMusicChange} \r\n        onMusicDisable={handleMusicDisable} \r\n        sidebarShown={sidebarShown} \r\n        onSidebarChange={setSidebarShown} \r\n        isMuted={checkIsMuted(audioState.state)} \r\n        onMuteToggle={handleMuteToggle} \r\n        volume={volume} \r\n        onVolumeChange={handleVolumeChange} \r\n        />\r\n        </div>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}